[{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\BalanceInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\BeneficiaryAutocomplete.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\CreateBankAccountSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\CreateUserSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\CreditInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\DateRangeFilter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Move your component(s) to a separate file.","line":65,"column":10,"nodeType":"Identifier","messageId":"localComponents","endLine":65,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\GiroDetailSheet.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'giro'. Either include it or remove the dependency array.","line":127,"column":6,"nodeType":"ArrayExpression","endLine":127,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [giro, giro.id]","fix":{"range":[4931,4941],"text":"[giro, giro.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { API_BASE_URL, api } from '@/lib/api'\nimport { Label } from '@/components/ui/label'\nimport { toast } from 'sonner'\nimport { useAuth } from '@/contexts/AuthContext'\nimport { useGiroDetail } from '@/hooks/queries/useGiroQueries'\nimport { useBankAccountsList, useBanksList } from '@/hooks/queries/useBankQueries'\nimport {\n  useExecuteGiro,\n  useMarkGiroAsProcessing,\n  useReturnGiro,\n  useDeleteGiro,\n  useUpdateGiro,\n  useUpdateGiroRate,\n} from '@/hooks/mutations/useGiroMutations'\nimport { useQueryClient } from '@tanstack/react-query'\nimport { PaymentProofUpload } from './PaymentProofUpload'\nimport { PrintTicketModal } from './PrintTicketModal'\nimport { XCircle, Copy, Share2, Download, CreditCard } from 'lucide-react'\nimport { GiroDetailSkeleton } from './skeletons/GiroDetailSkeleton'\nimport type { GiroStatus } from '@/types/api'\nimport { formatGiroCurrency } from '@/lib/giroUtils'\n\ninterface GiroDetailSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  giroId: string | null\n  initialStatus?: GiroStatus\n  onUpdate: () => void\n}\n\nconst RETURN_REASON_OPTIONS = [\n  'Número de cuenta incorrecto',\n  'Número de teléfono incorrecto',\n  'Banco incorrecto',\n  'Otro motivo',\n]\n\nexport function GiroDetailSheet({ open, onOpenChange, giroId, initialStatus, onUpdate }: GiroDetailSheetProps) {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n\n  const isTransferencista = user?.role === 'TRANSFERENCISTA'\n  const isAdmin = user?.role === 'ADMIN' || user?.role === 'SUPER_ADMIN'\n  const canExecute = user?.role === 'TRANSFERENCISTA' || user?.role === 'SUPER_ADMIN'\n\n  // Invalidate cache when giroId changes to force a fresh fetch\n  useEffect(() => {\n    if (giroId) {\n      queryClient.invalidateQueries({ queryKey: ['giro', giroId] })\n    }\n  }, [giroId, queryClient])\n\n  // React Query hooks\n  const { data: giro, isLoading } = useGiroDetail(open ? giroId : null)\n  const { data: bankAccounts = [] } = useBankAccountsList(user?.role, true)\n  const { data: banks = [] } = useBanksList()\n\n  const isOwner = giro?.createdBy?.id === user?.id\n\n  // Mutations\n  const executeGiroMutation = useExecuteGiro()\n  const markProcessingMutation = useMarkGiroAsProcessing()\n  const returnGiroMutation = useReturnGiro()\n  const deleteGiroMutation = useDeleteGiro()\n  const updateGiroMutation = useUpdateGiro()\n  const updateGiroRateMutation = useUpdateGiroRate()\n\n  // Local state for UI\n  const [isEditing, setIsEditing] = useState(false)\n  const [editableBeneficiaryName, setEditableBeneficiaryName] = useState('')\n  const [editableBeneficiaryId, setEditableBeneficiaryId] = useState('')\n  const [editablePhone, setEditablePhone] = useState('')\n  const [editableBankId, setEditableBankId] = useState('')\n  const [editableAccountNumber, setEditableAccountNumber] = useState('')\n  const [selectedBankAccountId, setSelectedBankAccountId] = useState('')\n  const [proofUrl, setProofUrl] = useState('')\n  const [fee, setFee] = useState('')\n  const [showReturnForm, setShowReturnForm] = useState(false)\n  const [returnReason, setReturnReason] = useState('')\n  const [isEditingRate, setIsEditingRate] = useState(false)\n  const [editableRate, setEditableRate] = useState({\n    buyRate: 0,\n    sellRate: 0,\n    usd: 0,\n    bcv: 0,\n  })\n  const [showProofPreview, setShowProofPreview] = useState(false)\n\n  const [isEditingCompletedProof, setIsEditingCompletedProof] = useState(false)\n  const [showPrintModal, setShowPrintModal] = useState(false)\n  const [proofBlobUrl, setProofBlobUrl] = useState<string | null>(null)\n\n  const remoteProofUrl = giro?.proofUrl || (giro?.paymentProofKey ? `/giro/${giro.id}/payment-proof/download` : '')\n\n  const fullProofUrl = remoteProofUrl\n    ? remoteProofUrl.startsWith('http')\n      ? remoteProofUrl\n      : `${API_BASE_URL.replace(/\\/api\\/?$/, '')}${remoteProofUrl}`\n    : ''\n\n  // Initialize editable fields when giro data loads\n  useEffect(() => {\n    if (giro) {\n      setEditableBeneficiaryName(giro.beneficiaryName)\n      setEditableBeneficiaryId(giro.beneficiaryId)\n      setEditablePhone(giro.phone)\n      setEditableAccountNumber(giro.accountNumber)\n      if (giro.bankCode) {\n        // Optionally try to find the bank by code, but we don't have the list here conveniently mapped.\n        // We'll skip auto-setting bank ID for now unless we do a lookup.\n        // Leaving it empty enforces user to select if they want to edit.\n      }\n      setEditableRate({\n        buyRate: giro.rateApplied?.buyRate || 0,\n        sellRate: giro.rateApplied?.sellRate || 0,\n        usd: giro.rateApplied?.usd || 0,\n        bcv: giro.rateApplied?.bcv || 0,\n      })\n      setSelectedBankAccountId('')\n      setFee('')\n      setProofUrl('')\n    }\n  }, [giro?.id])\n\n  // Fetch proof image securely (with auth headers)\n  useEffect(() => {\n    let active = true\n    const fetchProof = async () => {\n      // Fetch only if we have a valid URL and no blob yet\n      if (remoteProofUrl && giro?.status === 'COMPLETADO') {\n        try {\n          // Use api.downloadFile to get blob with auth headers\n          const { blob } = await api.downloadFile(remoteProofUrl)\n          const url = URL.createObjectURL(blob)\n          if (active) setProofBlobUrl(url)\n        } catch (error) {\n          console.error('Error fetching proof image:', error)\n        }\n      }\n    }\n\n    // Only fetch if we don't have a blob URL yet\n    if (remoteProofUrl && !proofBlobUrl) {\n      fetchProof()\n    }\n\n    return () => {\n      active = false\n    }\n  }, [remoteProofUrl, giro?.status, proofBlobUrl])\n\n  // Cleanup blob url\n  useEffect(() => {\n    return () => {\n      if (proofBlobUrl) URL.revokeObjectURL(proofBlobUrl)\n    }\n  }, [proofBlobUrl])\n\n  // Reset form when opening\n  useEffect(() => {\n    if (open && !giro) {\n      setShowReturnForm(false)\n      setReturnReason('')\n      setFee('')\n      setProofUrl('')\n    }\n  }, [open, giro])\n\n  // Invalidate bank accounts when opening a processing giro to ensure fresh data\n  useEffect(() => {\n    if (giro?.status === 'PROCESANDO' && open) {\n      queryClient.invalidateQueries({ queryKey: ['bankAccounts'], exact: false, refetchType: 'active' })\n    }\n  }, [giro?.status, open, queryClient])\n\n  const handleMarkAsProcessing = () => {\n    if (!giro) return\n    markProcessingMutation.mutate(giro.id, {\n      onSuccess: () => {\n        toast.success('Giro marcado como procesando')\n        onUpdate()\n      },\n      onError: (error) => {\n        const message = error instanceof Error ? error.message : 'Error al marcar giro como procesando'\n        toast.error(message)\n      },\n    })\n  }\n\n  const handleSaveEdit = () => {\n    if (!giro) return\n\n    if (\n      !editableBeneficiaryName ||\n      !editableBeneficiaryId ||\n      !editablePhone ||\n      !editableBankId ||\n      !editableAccountNumber\n    ) {\n      toast.error('Todos los campos del beneficiario son obligatorios.')\n      return\n    }\n\n    updateGiroMutation.mutate(\n      {\n        giroId: giro.id,\n        data: {\n          beneficiaryName: editableBeneficiaryName,\n          beneficiaryId: editableBeneficiaryId,\n          phone: editablePhone,\n          bankId: editableBankId,\n          accountNumber: editableAccountNumber,\n        },\n      },\n      {\n        onSuccess: () => {\n          toast.success('Giro actualizado exitosamente.')\n          setIsEditing(false)\n          onUpdate()\n        },\n        onError: (error) => {\n          const message = error instanceof Error ? error.message : 'Error al actualizar el giro.'\n          toast.error(message)\n        },\n      }\n    )\n  }\n\n  const handleExecuteGiro = () => {\n    if (!giro || !selectedBankAccountId || !giro.executionType) {\n      toast.error('Por favor completa todos los campos requeridos')\n      return\n    }\n\n    executeGiroMutation.mutate(\n      {\n        giroId: giro.id,\n        data: {\n          bankAccountId: selectedBankAccountId,\n          executionType: giro.executionType,\n          fee: Number(fee) || 0,\n          proofUrl: proofUrl || undefined,\n        },\n      },\n      {\n        onSuccess: () => {\n          toast.success('Giro ejecutado exitosamente')\n          onUpdate()\n          // Abrir modal de impresión para transferencistas y admins (solo en desktop)\n          if ((isTransferencista || isAdmin) && window.innerWidth >= 1024) {\n            setShowPrintModal(true)\n          }\n        },\n        onError: (error) => {\n          const message = error instanceof Error ? error.message : 'Error al ejecutar giro'\n          toast.error(message)\n        },\n      }\n    )\n  }\n\n  const handleReturnGiro = () => {\n    if (!giro || !returnReason.trim()) {\n      toast.error('Debes especificar un motivo para la devolución.')\n      return\n    }\n\n    returnGiroMutation.mutate(\n      { giroId: giro.id, reason: returnReason },\n      {\n        onSuccess: () => {\n          toast.success('Giro devuelto exitosamente.')\n          setReturnReason('')\n          setShowReturnForm(false)\n          onUpdate()\n          onOpenChange(false)\n        },\n        onError: (error) => {\n          const message = error instanceof Error ? error.message : 'Error al devolver el giro'\n          toast.error(message)\n        },\n      }\n    )\n  }\n\n  const handleResendGiro = () => {\n    if (!giro) return\n    if (!confirm('¿Estás seguro de que deseas reenviar este giro?')) {\n      return\n    }\n    // Update status to ASIGNADO (or PENDIENTE if we want to release it, but ASIGNADO keeps it)\n    // Assuming updateGiro accepts status override or we use a separate mutation?\n    // Using updateGiro with partial data.\n    updateGiroMutation.mutate(\n      {\n        giroId: giro.id,\n        data: { status: 'ASIGNADO' },\n      },\n      {\n        onSuccess: () => {\n          toast.success('Giro reenviado exitosamente.')\n          onUpdate()\n        },\n        onError: (error) => {\n          const message = error instanceof Error ? error.message : 'Error al reenviar el giro'\n          toast.error(message)\n        },\n      }\n    )\n  }\n\n  const handleDeleteGiro = () => {\n    if (!giro) return\n    if (!confirm('¿Estás seguro de que deseas eliminar este giro? Esta acción no se puede deshacer.')) {\n      return\n    }\n    deleteGiroMutation.mutate(giro.id, {\n      onSuccess: () => {\n        toast.success('Giro eliminado exitosamente.')\n        onUpdate()\n        onOpenChange(false)\n      },\n      onError: (error) => {\n        const message = error instanceof Error ? error.message : 'Error al eliminar el giro'\n        toast.error(message)\n      },\n    })\n  }\n\n  const handleSaveRateEdit = () => {\n    if (!giro) return\n    if (!editableRate.buyRate || !editableRate.sellRate || !editableRate.usd || !editableRate.bcv) {\n      toast.error('Todos los campos de la tasa son obligatorios.')\n      return\n    }\n    updateGiroRateMutation.mutate(\n      {\n        giroId: giro.id,\n        data: {\n          buyRate: editableRate.buyRate,\n          sellRate: editableRate.sellRate,\n          usd: editableRate.usd,\n          bcv: editableRate.bcv,\n        },\n      },\n      {\n        onSuccess: () => {\n          toast.success('Tasa del giro actualizada exitosamente.')\n          setIsEditingRate(false)\n          onUpdate()\n        },\n        onError: (error) => {\n          const message = error instanceof Error ? error.message : 'Error al actualizar la tasa del giro.'\n          toast.error(message)\n        },\n      }\n    )\n  }\n\n  const formatDate = (dateString: string | undefined) => {\n    if (!dateString) return '—'\n    try {\n      const date = new Date(dateString)\n      if (isNaN(date.getTime())) return '—'\n      return new Intl.DateTimeFormat('es-VE', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        hour12: true,\n      }).format(date)\n    } catch {\n      return '—'\n    }\n  }\n\n  const copyToClipboard = (text: string, label: string) => {\n    navigator.clipboard.writeText(text)\n    toast.success(`${label} copiado`)\n  }\n\n  const getProofBlob = async () => {\n    if (!remoteProofUrl) return null\n\n    try {\n      let blob: Blob\n      let filename = `comprobante-${giro?.id || 'doc'}.jpg`\n\n      if (proofBlobUrl) {\n        const response = await fetch(proofBlobUrl)\n        blob = await response.blob()\n      } else {\n        const result = await api.downloadFile(remoteProofUrl)\n        blob = result.blob\n        if (result.filename) filename = result.filename\n      }\n      return { blob, filename }\n    } catch (error) {\n      console.error('Error fetching proof:', error)\n      const message = error instanceof Error ? error.message : 'Error desconocido'\n      toast.error(`Error al obtener comprobante: ${message}`)\n      return null\n    }\n  }\n\n  const handleShareProof = async () => {\n    const result = await getProofBlob()\n    if (!result) return\n\n    const { blob, filename } = result\n\n    // Check if sharing is supported\n    if (!navigator.canShare || !navigator.share) {\n      toast.error('Tu dispositivo no soporta la función de compartir nativa.')\n      return\n    }\n\n    try {\n      // Detectar tipo MIME\n      let mimeType = 'image/jpeg'\n      const lowerFilename = filename.toLowerCase()\n      if (lowerFilename.endsWith('.png')) mimeType = 'image/png'\n      else if (lowerFilename.endsWith('.pdf')) mimeType = 'application/pdf'\n      else if (lowerFilename.endsWith('.jpg') || lowerFilename.endsWith('.jpeg')) mimeType = 'image/jpeg'\n\n      const file = new File([blob], filename, { type: mimeType })\n\n      if (navigator.canShare({ files: [file] })) {\n        await navigator.share({\n          files: [file],\n          title: 'Comprobante de Pago',\n          text: 'Compartir comprobante de pago',\n        })\n        toast.success('Compartido exitosamente')\n      } else {\n        toast.error('Tu dispositivo no permite compartir este tipo de archivo.')\n      }\n    } catch (error) {\n      const isAbort = error instanceof Error && error.name === 'AbortError'\n      if (!isAbort) {\n        console.error('Share error:', error)\n        const message = error instanceof Error ? error.message : 'Error desconocido'\n        toast.error(`Error al compartir: ${message}`)\n      }\n    }\n  }\n\n  const handleDownloadProof = async () => {\n    const result = await getProofBlob()\n    if (!result) return\n\n    const { blob, filename } = result\n\n    try {\n      const url = window.URL.createObjectURL(blob)\n      const link = document.createElement('a')\n      link.href = url\n      link.download = filename\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      window.URL.revokeObjectURL(url)\n      toast.success('Descarga iniciada')\n    } catch (error) {\n      console.error('Download error:', error)\n      const message = error instanceof Error ? error.message : 'Error desconocido'\n      toast.error(`Error al descargar: ${message}`)\n    }\n  }\n\n  const isProcessing =\n    executeGiroMutation.isPending ||\n    markProcessingMutation.isPending ||\n    returnGiroMutation.isPending ||\n    deleteGiroMutation.isPending ||\n    updateGiroMutation.isPending ||\n    updateGiroRateMutation.isPending\n\n  if (!giro && !isLoading) {\n    return null\n  }\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"w-full sm:max-w-md p-0 gap-0 border-l overflow-hidden flex flex-col h-full bg-white dark:bg-slate-950\">\n        <SheetHeader\n          className=\"px-6 py-4 border-b flex flex-row items-center justify-between space-y-0\"\n          onClose={() => onOpenChange(false)}\n        >\n          <SheetTitle className=\"text-lg font-bold\">\n            {giro?.executionType === 'TRANSFERENCIA' && 'Giro a banco'}\n            {giro?.executionType === 'PAGO_MOVIL' && 'Pago móvil'}\n            {giro?.executionType === 'EFECTIVO' && 'Pago en efectivo'}\n            {giro?.executionType === 'ZELLE' && 'Pago por Zelle'}\n            {giro?.executionType === 'RECARGA' && 'Recarga'}\n            {giro?.executionType === 'OTROS' && 'Otro tipo de pago'}\n            {!giro?.executionType && 'Detalle del giro'}\n          </SheetTitle>\n        </SheetHeader>\n\n        {/* Status Alarm Banner */}\n        {giro?.status === 'DEVUELTO' && (\n          <div className=\"bg-red-700 text-white text-sm font-semibold py-2 px-6 text-center\">\n            {giro.returnReason || 'Giro devuelto'}\n          </div>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-6 py-6 space-y-6\">\n          {isLoading ? (\n            <GiroDetailSkeleton status={initialStatus} />\n          ) : giro ? (\n            <>\n              {/* Minimalist Key-Value Pairs */}\n              <div className=\"space-y-4 text-sm\">\n                {/* Cliente / Beneficiario Name */}\n                <div className=\"flex justify-between items-start\">\n                  <span className=\"text-muted-foreground\">Cliente:</span>\n                  <span className=\"font-medium text-right\">{giro.beneficiaryName}</span>\n                </div>\n\n                {/* Cédula */}\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-muted-foreground\">Cédula:</span>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-medium\">{giro.beneficiaryId}</span>\n                    <button\n                      onClick={() => copyToClipboard(giro.beneficiaryId, 'Cédula')}\n                      className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Cuenta */}\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-muted-foreground\">Cuenta:</span>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-medium font-mono text-xs md:text-sm\">{giro.accountNumber}</span>\n                    <button\n                      onClick={() => copyToClipboard(giro.accountNumber, 'Cuenta')}\n                      className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Banco */}\n                <div className=\"flex justify-between items-start\">\n                  <span className=\"text-muted-foreground\">Banco:</span>\n                  <span className=\"font-medium text-right uppercase\">{`0${giro.bankCode} - ${giro.bankName}`}</span>\n                </div>\n\n                {/* CELULAR - SOLO PAGO MOVIL */}\n                {giro.executionType === 'PAGO_MOVIL' && (\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-muted-foreground\">Celular:</span>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">{giro.phone}</span>\n                      <button\n                        onClick={() => copyToClipboard(giro.phone, 'Celular')}\n                        className=\"text-muted-foreground hover:text-foreground transition-colors\"\n                      >\n                        <Copy className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {/* Monto USD/COP */}\n                <div className=\"flex justify-between items-center pt-2\">\n                  <span className=\"text-muted-foreground\">Monto {giro.currencyInput}:</span>\n                  <span className=\"font-medium\">{formatGiroCurrency(giro.amountInput, giro.currencyInput)}</span>\n                </div>\n\n                {/* Bolívares */}\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-muted-foreground\">Bolívares:</span>\n                  <span className=\"font-medium text-lg\">\n                    {giro.amountBs.toLocaleString('es-VE', {\n                      style: 'currency',\n                      currency: 'VES',\n                      minimumFractionDigits: 2,\n                    })}\n                  </span>\n                </div>\n              </div>\n\n              {/* Divider */}\n              <div className=\"h-px bg-border my-4\" />\n\n              {/* Editing Form */}\n              {isEditing && (\n                <div className=\"space-y-4 border p-4 rounded-lg bg-muted/20\">\n                  <h3 className=\"font-semibold text-sm\">Editar Datos</h3>\n                  <div className=\"space-y-3\">\n                    <div className=\"grid gap-1\">\n                      <Label htmlFor=\"editName\" className=\"text-xs\">\n                        Nombre\n                      </Label>\n                      <Input\n                        id=\"editName\"\n                        value={editableBeneficiaryName}\n                        onChange={(e) => setEditableBeneficiaryName(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    <div className=\"grid gap-1\">\n                      <Label htmlFor=\"editId\" className=\"text-xs\">\n                        Cédula\n                      </Label>\n                      <Input\n                        id=\"editId\"\n                        value={editableBeneficiaryId}\n                        onChange={(e) => setEditableBeneficiaryId(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    <div className=\"grid gap-1\">\n                      <Label htmlFor=\"editPhone\" className=\"text-xs\">\n                        Teléfono\n                      </Label>\n                      <Input\n                        id=\"editPhone\"\n                        value={editablePhone}\n                        onChange={(e) => setEditablePhone(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                    <div className=\"grid gap-1\">\n                      <Label htmlFor=\"editBankId\" className=\"text-xs\">\n                        Banco\n                      </Label>\n                      <select\n                        id=\"editBankId\"\n                        value={editableBankId}\n                        onChange={(e) => setEditableBankId(e.target.value)}\n                        className=\"flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors\"\n                      >\n                        <option value=\"\" disabled>\n                          Selecciona un banco\n                        </option>\n                        {banks.map((bank) => (\n                          <option key={bank.id} value={bank.id}>\n                            {bank.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    <div className=\"grid gap-1\">\n                      <Label htmlFor=\"editAccountNumber\" className=\"text-xs\">\n                        Cuenta\n                      </Label>\n                      <Input\n                        id=\"editAccountNumber\"\n                        value={editableAccountNumber}\n                        onChange={(e) => setEditableAccountNumber(e.target.value)}\n                        className=\"h-8\"\n                      />\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button size=\"sm\" onClick={handleSaveEdit} disabled={isProcessing}>\n                      Guardar\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" onClick={() => setIsEditing(false)}>\n                      Cancelar\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Admin Exchange Rate Section - Minimalist */}\n              {isAdmin && (\n                <div className=\"py-2 border-t border-b border-dashed my-2\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-xs text-muted-foreground\">Tasa Aplicada:</span>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-mono font-medium\">{giro.rateApplied?.sellRate?.toFixed(2)}</span>\n                      {!isEditingRate && giro.status === 'ASIGNADO' && (\n                        <Button variant=\"ghost\" size=\"icon\" className=\"h-6 w-6\" onClick={() => setIsEditingRate(true)}>\n                          <CreditCard className=\"h-3 w-3\" /> {/* Using CreditCard as generic edit icon or just text */}\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n\n                  {isEditingRate && (\n                    <div className=\"mt-2 space-y-2 bg-muted/30 p-2 rounded\">\n                      <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                        <div>\n                          <Label className=\"text-[10px]\">Compra</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            className=\"h-7\"\n                            value={editableRate.buyRate}\n                            onChange={(e) =>\n                              setEditableRate({ ...editableRate, buyRate: parseFloat(e.target.value) || 0 })\n                            }\n                          />\n                        </div>\n                        <div>\n                          <Label className=\"text-[10px]\">Venta</Label>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            className=\"h-7\"\n                            value={editableRate.sellRate}\n                            onChange={(e) =>\n                              setEditableRate({ ...editableRate, sellRate: parseFloat(e.target.value) || 0 })\n                            }\n                          />\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button\n                          size=\"sm\"\n                          onClick={handleSaveRateEdit}\n                          disabled={isProcessing}\n                          className=\"h-7 text-xs w-full\"\n                        >\n                          Guardar\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"ghost\"\n                          onClick={() => setIsEditingRate(false)}\n                          className=\"h-7 text-xs w-full\"\n                        >\n                          Cancelar\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* ACTIONS SECTION (Transferencista/SuperAdmin Processing) */}\n              {canExecute && giro.status === 'PROCESANDO' && (\n                <div className=\"space-y-6 pt-2\">\n                  {/* \"De que cuenta sale el dinero?\" */}\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"bankAccount\" className=\"text-sm font-normal text-muted-foreground\">\n                      De que cuenta sale el dinero?\n                    </Label>\n                    <select\n                      id=\"bankAccount\"\n                      value={selectedBankAccountId}\n                      onChange={(e) => setSelectedBankAccountId(e.target.value)}\n                      className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n                    >\n                      <option value=\"\">Seleccionar cuenta:</option>\n                      {bankAccounts.map((account) => (\n                        <option key={account.id} value={account.id}>\n                          {account.bank.name} - {account.accountHolder}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"fee\" className=\"text-sm font-normal text-muted-foreground\">\n                      Comisión pago movil\n                    </Label>\n                    <Input\n                      id=\"fee\"\n                      type=\"number\"\n                      value={fee}\n                      onChange={(e) => setFee(e.target.value)}\n                      placeholder=\"0,00\"\n                      className=\"text-right\"\n                    />\n                  </div>\n\n                  {/* Upload Capture Box - Minimalist */}\n                  <div className=\"mt-2\">\n                    <PaymentProofUpload\n                      giroId={giro.id}\n                      onProofUploaded={(url) => setProofUrl(url)}\n                      minimalist={true}\n                    />\n                  </div>\n\n                  {/* Action Buttons Grid */}\n                  <div className=\"grid grid-cols-2 gap-4 pt-4\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setShowReturnForm(true)}\n                      className=\"w-full border-blue-600 text-blue-600 hover:bg-blue-50\"\n                    >\n                      Devolver\n                    </Button>\n                    <Button\n                      onClick={handleExecuteGiro}\n                      disabled={!selectedBankAccountId || !proofUrl || isProcessing}\n                      className=\"w-full bg-slate-200 text-slate-700 hover:bg-slate-300 disabled:opacity-50 font-bold\"\n                    >\n                      Enviar\n                    </Button>\n                  </div>\n\n                  {/* Secondary Actions Row */}\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <Button\n                      variant=\"outline\"\n                      onClick={handleDeleteGiro}\n                      className=\"w-full border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300\"\n                    >\n                      Eliminar\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => setIsEditing(true)}\n                      className=\"w-full border-blue-600 text-blue-600 hover:bg-blue-50\"\n                    >\n                      Corregir\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Asignado state: Start Processing */}\n              {canExecute && giro.status === 'ASIGNADO' && (\n                <div className=\"pt-4\">\n                  <Button onClick={handleMarkAsProcessing} disabled={isProcessing} className=\"w-full\">\n                    Marcar como Procesando\n                  </Button>\n                </div>\n              )}\n\n              {/* Owner Actions for ASIGNADO (Delete) */}\n              {giro.status === 'ASIGNADO' && isOwner && (\n                <div className=\"space-y-4 pt-4 border-t\">\n                  <p className=\"text-xs text-muted-foreground text-center\">\n                    El giro está asignado y en espera de ser procesado.\n                  </p>\n                  <Button\n                    variant=\"outline\"\n                    onClick={handleDeleteGiro}\n                    className=\"w-full border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300\"\n                    disabled={isProcessing}\n                  >\n                    Eliminar Giro\n                  </Button>\n                </div>\n              )}\n\n              {/* Actions for DEVUELTO (Delete, Edit, Resend) */}\n              {giro.status === 'DEVUELTO' && (\n                <div className=\"space-y-4 pt-4 border-t\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {/* Delete: Owner or Admin */}\n                    {(isOwner || isAdmin) && (\n                      <Button\n                        variant=\"outline\"\n                        onClick={handleDeleteGiro}\n                        className=\"w-full border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300\"\n                        disabled={isProcessing}\n                      >\n                        Eliminar\n                      </Button>\n                    )}\n\n                    {/* Owner specific: Edit/Resend */}\n                    {isOwner && (\n                      <>\n                        <Button\n                          variant=\"outline\"\n                          onClick={() => setIsEditing(true)}\n                          className=\"w-full border-blue-600 text-blue-600 hover:bg-blue-50\"\n                          disabled={isProcessing}\n                        >\n                          Corregir\n                        </Button>\n                        <Button\n                          onClick={handleResendGiro}\n                          className=\"w-full col-span-2 bg-slate-200 text-slate-700 hover:bg-slate-300 font-bold\"\n                          disabled={isProcessing}\n                        >\n                          Reenviar Giro\n                        </Button>\n                      </>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {/* Show Return Form Overlay or Inline if clicked \"Devolver\" */}\n              {showReturnForm && (\n                <div className=\"fixed inset-0 z-50 bg-black/20 flex items-center justify-center p-4\">\n                  <div className=\"bg-white dark:bg-slate-900 p-6 rounded-lg shadow-xl max-w-sm w-full space-y-4\">\n                    <h3 className=\"font-bold text-lg\">Devolver Giro</h3>\n                    <select\n                      value={returnReason}\n                      onChange={(e) => setReturnReason(e.target.value)}\n                      className=\"w-full h-10 px-3 py-2 border rounded-md\"\n                    >\n                      <option value=\"\" disabled>\n                        Motivo\n                      </option>\n                      {RETURN_REASON_OPTIONS.map((opt) => (\n                        <option key={opt} value={opt}>\n                          {opt}\n                        </option>\n                      ))}\n                    </select>\n                    <div className=\"flex gap-2\">\n                      <Button variant=\"outline\" className=\"flex-1\" onClick={() => setShowReturnForm(false)}>\n                        Cancelar\n                      </Button>\n                      <Button\n                        variant=\"destructive\"\n                        className=\"flex-1\"\n                        onClick={handleReturnGiro}\n                        disabled={!returnReason}\n                      >\n                        Confirmar\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Proof for Completed */}\n              {giro.status === 'COMPLETADO' && (\n                <div className=\"flex flex-col items-center justify-center pt-8 pb-4\">\n                  {/* Thumbnail of proof */}\n                  <div className=\"relative group cursor-pointer\" onClick={() => setShowProofPreview(true)}>\n                    <img\n                      src={proofBlobUrl || fullProofUrl || '/OIP.webp'}\n                      alt=\"Comprobante\"\n                      className=\"h-32 w-auto object-contain border rounded shadow-sm hover:opacity-90 transition-opacity bg-gray-50 dark:bg-gray-800\"\n                    />\n                    <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <div className=\"bg-black/50 p-2 rounded-full text-white\">\n                        <Share2 className=\"h-5 w-5\" />\n                      </div>\n                    </div>\n                  </div>\n                  {((isTransferencista && giro.transferencista?.user?.id === user?.id) || isAdmin) && (\n                    <Button\n                      variant=\"link\"\n                      className=\"text-xs h-6 p-0 mt-2 text-muted-foreground\"\n                      onClick={() => setIsEditingCompletedProof(true)}\n                    >\n                      Cambiar captura\n                    </Button>\n                  )}\n\n                  {/* Edit Proof Form (Minimalist Overlay) */}\n                  {isEditingCompletedProof && (\n                    <div className=\"mt-2 w-full max-w-xs\">\n                      <PaymentProofUpload\n                        giroId={giro.id}\n                        onProofUploaded={() => {\n                          setIsEditingCompletedProof(false)\n                          setProofBlobUrl(null) // Force refresh of the proof image\n                          onUpdate()\n                          toast.success('Comprobante actualizado exitosamente')\n                        }}\n                        minimalist={true}\n                      />\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"w-full mt-1 h-6 text-xs\"\n                        onClick={() => setIsEditingCompletedProof(false)}\n                      >\n                        Cancelar\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              )}\n            </>\n          ) : null}\n        </div>\n\n        {/* Footer Text */}\n        {giro && (\n          <div className=\"px-6 py-4 text-right text-xs text-muted-foreground italic bg-slate-50 dark:bg-slate-900 border-t\">\n            <p>Enviado: {formatDate(giro.createdAt)}</p>\n            {giro.completedAt && <p>Transferencia: {formatDate(giro.completedAt)}</p>}\n          </div>\n        )}\n      </SheetContent>\n\n      {/* Modal de preview del comprobante */}\n      {showProofPreview && giro?.paymentProofKey && (\n        <div className=\"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm\">\n          <div className=\"bg-transparent max-w-2xl w-full max-h-[90vh] flex flex-col items-center\">\n            <div className=\"relative w-full text-center\">\n              <img\n                src={proofBlobUrl || fullProofUrl}\n                alt=\"Comprobante de pago\"\n                className=\"max-w-full max-h-[80vh] w-auto h-auto rounded shadow-2xl mx-auto\"\n              />\n              <button\n                onClick={() => setShowProofPreview(false)}\n                className=\"absolute -top-10 right-0 text-white hover:text-gray-300\"\n              >\n                <XCircle className=\"h-8 w-8\" />\n              </button>\n            </div>\n            <div className=\"mt-4 flex gap-4\">\n              {/* Force download button - visible on all devices */}\n              <Button className=\"bg-white text-black hover:bg-gray-100\" onClick={handleDownloadProof}>\n                <Download className=\"mr-2 h-4 w-4\" /> Bajar\n              </Button>\n\n              {/* Share button - visible if sharing is supported (mostly mobile) */}\n              {!!navigator.share && (\n                <Button className=\"bg-white text-black hover:bg-gray-100\" onClick={handleShareProof}>\n                  <Share2 className=\"mr-2 h-4 w-4\" /> Compartir\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Keep PrintTicketModal */}\n      {giro && <PrintTicketModal giroId={giro.id} open={showPrintModal} onOpenChange={setShowPrintModal} />}\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\GiroTypeMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\MinoristaSimpleTransactionTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\MinoristaTransactionHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\MobilePaymentSheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ModeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\OperatorAmountsManager.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOperatorsAndAmounts'. Either include it or remove the dependency array.","line":42,"column":6,"nodeType":"ArrayExpression","endLine":42,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadOperatorsAndAmounts]","fix":{"range":[1314,1316],"text":"[loadOperatorsAndAmounts]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport { Trash2, Plus, Edit2, Check, X, DollarSign } from 'lucide-react'\n\ninterface RechargeOperator {\n  id: string\n  name: string\n  type: string\n  isActive: boolean\n}\n\ninterface RechargeAmount {\n  id: string\n  amountBs: number\n  isActive: boolean\n}\n\ninterface OperatorAmount {\n  id: string\n  operator: RechargeOperator\n  amount: RechargeAmount\n  isActive: boolean\n}\n\nexport function OperatorAmountsManager() {\n  const [operators, setOperators] = useState<RechargeOperator[]>([])\n  const [operatorAmounts, setOperatorAmounts] = useState<OperatorAmount[]>([])\n  const [selectedOperatorId, setSelectedOperatorId] = useState('')\n  const [newAmountValue, setNewAmountValue] = useState('')\n  const [editingAmountId, setEditingAmountId] = useState<string | null>(null)\n  const [editingAmountValue, setEditingAmountValue] = useState('')\n  const [loading, setLoading] = useState(true)\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    loadOperatorsAndAmounts()\n  }, [])\n\n  useEffect(() => {\n    if (selectedOperatorId) {\n      loadOperatorAmounts(selectedOperatorId)\n    }\n  }, [selectedOperatorId])\n\n  const loadOperatorsAndAmounts = async () => {\n    try {\n      setLoading(true)\n      const operatorsData = await api.get<RechargeOperator[]>('/recharge-operators/all')\n      setOperators(operatorsData)\n      if (operatorsData.length > 0 && !selectedOperatorId) {\n        setSelectedOperatorId(operatorsData[0].id)\n      }\n    } catch (error) {\n      console.error('Error loading operators:', error)\n      toast.error('Error al cargar operadores')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadOperatorAmounts = async (operatorId: string) => {\n    try {\n      const data = await api.get<OperatorAmount[]>(`/operator-amounts/${operatorId}/all`)\n      setOperatorAmounts(data)\n    } catch (error) {\n      console.error('Error loading operator amounts:', error)\n      toast.error('Error al cargar relaciones de operador-monto')\n      setOperatorAmounts([])\n    }\n  }\n\n  const handleCreateNewAmount = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!newAmountValue || Number(newAmountValue) <= 0) {\n      toast.error('Por favor ingresa un monto válido')\n      return\n    }\n\n    if (!selectedOperatorId) {\n      toast.error('Por favor selecciona un operador primero')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      // Create the amount\n      const newAmount = await api.post<RechargeAmount>('/recharge-amounts', {\n        amountBs: Number(newAmountValue),\n      })\n\n      // Assign it to the operator\n      await api.post('/operator-amounts', {\n        operatorId: selectedOperatorId,\n        amountId: newAmount.id,\n      })\n\n      await loadOperatorAmounts(selectedOperatorId)\n      setNewAmountValue('')\n      toast.success('Monto creado y asignado al operador exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al crear monto'\n      toast.error(message)\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleEditAmount = async (operatorAmountId: string) => {\n    if (!editingAmountValue || Number(editingAmountValue) <= 0) {\n      toast.error('Por favor ingresa un monto válido')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const operatorAmount = operatorAmounts.find((oa) => oa.id === operatorAmountId)\n      if (!operatorAmount) return\n\n      await api.put<RechargeAmount>(`/recharge-amounts/${operatorAmount.amount.id}`, {\n        amountBs: Number(editingAmountValue),\n      })\n\n      await loadOperatorAmounts(selectedOperatorId)\n      setEditingAmountId(null)\n      setEditingAmountValue('')\n      toast.success('Monto actualizado exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al actualizar monto'\n      toast.error(message)\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleDeleteAmount = async (operatorAmountId: string) => {\n    if (!window.confirm('¿Estás seguro de que deseas eliminar este monto del operador?')) {\n      return\n    }\n\n    try {\n      await api.delete(`/operator-amounts/${operatorAmountId}`)\n      await loadOperatorAmounts(selectedOperatorId)\n      toast.success('Monto removido del operador')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al remover monto'\n      toast.error(message)\n    }\n  }\n\n  const currentOperator = operators.find((op) => op.id === selectedOperatorId)\n\n  return (\n    <Card>\n      <CardHeader className=\"border-b text-white\" style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}>\n        <CardTitle className=\"flex items-center gap-2 text-lg\">\n          <DollarSign className=\"h-5 w-5\" />\n          Gestionar Montos por Operador\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6 pt-6\">\n        {/* Operator Selector */}\n        <div className=\"space-y-2\">\n          <label className=\"text-sm font-semibold text-gray-800\">Selecciona un Operador</label>\n          <select\n            value={selectedOperatorId}\n            onChange={(e) => setSelectedOperatorId(e.target.value)}\n            className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n            style={{ '--tw-ring-color': '#136BBC' } as React.CSSProperties}\n          >\n            <option value=\"\">Seleccionar operador</option>\n            {operators.map((operator) => (\n              <option key={operator.id} value={operator.id}>\n                {operator.name} {!operator.isActive && '(Inactivo)'}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {selectedOperatorId && currentOperator && (\n          <>\n            {/* Create New Amount Form */}\n            <form\n              onSubmit={handleCreateNewAmount}\n              className=\"space-y-4 p-6 rounded-lg border-2 border-blue-200\"\n              style={{ backgroundColor: 'rgba(19, 107, 188, 0.05)' }}\n            >\n              <div className=\"flex items-center gap-2\">\n                <Plus className=\"h-5 w-5\" style={{ color: '#136BBC' }} />\n                <h3 className=\"font-bold text-sm\">Crear Nuevo Monto para {currentOperator.name}</h3>\n              </div>\n\n              <div>\n                <Label htmlFor=\"newAmount\" className=\"text-xs font-semibold\">\n                  Nuevo Monto en Bs\n                </Label>\n                <Input\n                  id=\"newAmount\"\n                  type=\"number\"\n                  placeholder=\"Ej: 50000\"\n                  step=\"1\"\n                  value={newAmountValue}\n                  onChange={(e) => setNewAmountValue(e.target.value)}\n                  className=\"mt-2\"\n                />\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={submitting}\n                className=\"flex items-center gap-2 text-white w-full\"\n                style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}\n              >\n                <Plus className=\"h-4 w-4\" />\n                Crear y Asignar Monto\n              </Button>\n            </form>\n\n            {/* Operator Amounts List */}\n            <div className=\"space-y-3\">\n              <h3 className=\"font-bold text-sm text-gray-800\">\n                Montos Asignados a {currentOperator.name} ({operatorAmounts.length})\n              </h3>\n              {loading ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <div className=\"inline-block animate-pulse\">Cargando...</div>\n                </div>\n              ) : operatorAmounts.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-gray-200\">\n                  <Plus className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n                  <p>No hay montos asignados a este operador</p>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  {operatorAmounts.map((oa) => (\n                    <div\n                      key={oa.id}\n                      className={`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${\n                        oa.isActive\n                          ? 'border-gray-200 bg-white hover:border-green-300 hover:shadow-md'\n                          : 'border-gray-200 bg-gray-50 opacity-60'\n                      }`}\n                    >\n                      {editingAmountId === oa.id ? (\n                        <div className=\"flex-1 space-y-3\">\n                          <Input\n                            type=\"number\"\n                            placeholder=\"Nuevo monto\"\n                            value={editingAmountValue}\n                            onChange={(e) => setEditingAmountValue(e.target.value)}\n                            step=\"1\"\n                          />\n                          <div className=\"flex gap-2\">\n                            <Button\n                              type=\"button\"\n                              size=\"sm\"\n                              onClick={() => handleEditAmount(oa.id)}\n                              disabled={submitting}\n                              className=\"flex-1 flex items-center justify-center gap-2 text-white\"\n                              style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}\n                            >\n                              <Check className=\"h-4 w-4\" />\n                              Guardar\n                            </Button>\n                            <Button\n                              type=\"button\"\n                              size=\"sm\"\n                              variant=\"outline\"\n                              className=\"flex-1 flex items-center justify-center gap-2\"\n                              style={{ borderColor: '#136BBC', color: '#136BBC' }}\n                              onClick={() => {\n                                setEditingAmountId(null)\n                                setEditingAmountValue('')\n                              }}\n                            >\n                              <X className=\"h-4 w-4\" />\n                              Cancelar\n                            </Button>\n                          </div>\n                        </div>\n                      ) : (\n                        <>\n                          <div className=\"flex-1\">\n                            <p className=\"font-bold text-lg text-gray-900\">\n                              {oa.amount.amountBs.toLocaleString('es-VE')} Bs\n                            </p>\n                            {!oa.isActive && (\n                              <span className=\"inline-block mt-2 px-2 py-1 bg-gray-200 text-gray-700 text-xs font-semibold rounded\">\n                                Inactivo\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() => {\n                                setEditingAmountId(oa.id)\n                                setEditingAmountValue(oa.amount.amountBs.toString())\n                              }}\n                              className=\"p-2.5 hover:bg-blue-100 rounded-lg transition-colors\"\n                              style={{ color: '#136BBC' }}\n                              title=\"Editar monto\"\n                              aria-label=\"Editar monto\"\n                            >\n                              <Edit2 className=\"h-5 w-5\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteAmount(oa.id)}\n                              className=\"p-2.5 hover:bg-red-100 rounded-lg transition-colors text-red-600 hover:text-red-800\"\n                              title=\"Remover monto\"\n                              aria-label=\"Remover monto\"\n                            >\n                              <Trash2 className=\"h-5 w-5\" />\n                            </button>\n                          </div>\n                        </>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\PaymentProofUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\PrintTicketModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchTicketData', 'getPrinterConfig', and 'ticketData'. Either include them or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchTicketData, getPrinterConfig, open, ticketData]","fix":{"range":[2016,2022],"text":"[fetchTicketData, getPrinterConfig, open, ticketData]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetBody } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Printer, X, Settings } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { api } from '@/lib/api'\nimport { usePrinterConfig } from '@/hooks/usePrinterConfig'\n\ninterface ThermalTicketData {\n  companyName: string\n  companyPhone: string\n  companyAddress: string\n  companyCity: string\n  divider: string\n  giroId: string\n  createdAt: string\n  completedAt?: string\n  beneficiaryName: string\n  beneficiaryId: string\n  bankName: string\n  accountNumber: string\n  phone: string\n  amountInput: string\n  currencyInput: string\n  amountBs: string\n  commission?: string\n  bcvApplied: string\n  systemProfit: string\n  minoristaProfit: string\n  executionType: string\n  bankAccountUsed?: string\n  createdByName: string\n  executedByName?: string\n  timestamp: string\n}\n\ninterface PrintTicketModalProps {\n  giroId: string\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\n/**\n * Componente para imprimir tiquete térmico (80mm) desde navegador\n * Optimizado para impresoras térmicas de rollo\n */\nexport function PrintTicketModal({ giroId, open, onOpenChange }: PrintTicketModalProps) {\n  const [loading, setLoading] = useState(false)\n  const [ticketData, setTicketData] = useState<ThermalTicketData | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [printerName, setPrinterName] = useState('')\n  const [autoSavePrinter, setAutoSavePrinter] = useState(false)\n  const printFrameRef = useRef<HTMLIFrameElement>(null)\n  const { getPrinterConfig } = usePrinterConfig()\n\n  // Cargar datos del tiquete y configuración cuando se abre el modal\n  useEffect(() => {\n    if (open) {\n      if (!ticketData) {\n        fetchTicketData()\n      }\n      const config = getPrinterConfig()\n      if (config) {\n        setPrinterName(config.name)\n        setAutoSavePrinter(true)\n      }\n    }\n  }, [open])\n\n  const fetchTicketData = async () => {\n    setLoading(true)\n    setError(null)\n    try {\n      const ticketData = await api.get<ThermalTicketData>(`/giro/${giroId}/thermal-ticket`)\n      setTicketData(ticketData)\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Error al cargar los datos del tiquete'\n      setError(message)\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  /**\n   * Genera el HTML del tiquete optimizado para 80mm (térmica)\n   * Ancho estándar de impresoras térmicas: 80mm = ~384px @ 96dpi\n   */\n  const generateThermalHTML = (data: ThermalTicketData): string => {\n    return `\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Tiquete Giro #${data.giroId}</title>\n    <style>\n            * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        @page {\n            margin: 0;\n            @top-left { content: none; }\n            @top-center { content: none; }\n            @top-right { content: none; }\n            @bottom-left { content: none; }\n            @bottom-center { content: none; }\n            @bottom-right { content: none; }\n        }\n\n        body {\n            font-family: 'Courier New', monospace;\n            width: 80mm;\n            margin: 0;\n            padding: 0;\n            background: white;\n            font-weight: bold;\n            color: #000000;\n        }\n\n        .ticket {\n            width: 100%;\n            padding: 10px;\n            font-size: 12px;\n            line-height: 1.4;\n            color: #000;\n        }\n\n        .header {\n            text-align: center;\n            border-bottom: 1px dashed #000;\n            padding-bottom: 10px;\n            margin-bottom: 10px;\n        }\n\n        .company-name {\n            font-weight: bold;\n            font-size: 14px;\n            margin-bottom: 1px;\n        }\n\n        .company-phone {\n            font-size: 11px;\n            margin-bottom: 5px;\n        }\n\n        .divider {\n            font-size: 11px;\n            text-align: center;\n            margin: 10px 0;\n            letter-spacing: 1px;\n        }\n\n        .section {\n            margin-bottom: 10px;\n            border-bottom: 1px dashed #000;\n            padding-bottom: 8px;\n        }\n\n        .section-title {\n            font-weight: bold;\n            font-size: 11px;\n            margin-bottom: 5px;\n            text-transform: uppercase;\n        }\n\n        .row {\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            line-height: 1.5;\n        }\n\n        .label {\n            flex: 1;\n            font-weight: bold;\n        }\n\n        .value {\n            flex: 2;\n            text-align: right;\n            word-wrap: break-word;\n        }\n\n        \n        .label {\n            flex: 1;\n            font-weight: bold;\n        }\n\n        .value-1 {\n            flex: 1;\n            text-align: right;\n            word-wrap: break-word;\n        }\n\n\n        .full-row {\n            width: 100%;\n            font-size: 12px;\n            margin-bottom: 5px;\n            word-wrap: break-word;\n        }\n\n        .amount-highlight {\n            font-size: 14px;\n            font-weight: bold;\n            text-align: center;\n            margin: 10px 0;\n            padding: 5px;\n            border: 1px solid #000;\n        }\n\n        .footer {\n            text-align: center;\n            margin-top: 10px;\n            border-top: 1px dashed #000;\n            padding-top: 10px;\n            font-size: 11px;\n        }\n\n        .status-completed {\n            text-align: center;\n            font-weight: bold;\n            margin: 10px 0;\n            padding: 5px;\n            border: 1px solid #000;\n            text-transform: uppercase;\n            font-size: 11px;\n        }\n\n        @media print {\n            body {\n                margin: 0;\n                padding: 0;\n                width: 80mm;\n            }\n            .ticket {\n                padding: 5px;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"ticket\">\n        <!-- ENCABEZADO -->\n        <div class=\"header\">\n            <div class=\"company-name\">${data.companyName}</div>\n            <div class=\"company-address\">${data.companyAddress}</div>\n            <div class=\"company-city\">${data.companyCity}</div>\n            <div class=\"company-phone\">${data.companyPhone}</div>\n        </div>\n\n        <!-- INFORMACIÓN DEL GIRO -->\n        <div class=\"section\"> \n            <div class=\"row\">\n                <span class=\"label\">Creado:</span>\n                <span class=\"value\">${data.createdAt}</span>\n            </div>\n            ${\n              data.completedAt\n                ? `\n            <div class=\"row\">\n                <span class=\"label\">Ejecutado:</span>\n                <span class=\"value\">${data.completedAt}</span>\n            </div>\n            `\n                : ''\n            }\n        </div>\n\n        <!-- DATOS DEL BENEFICIARIO -->\n        <div class=\"section\">\n            <div class=\"section-title\">Beneficiario</div>\n            <div class=\"full-row\"><strong>${data.beneficiaryName}</strong></div>\n            <div class=\"row\">\n                <span class=\"label\">Cédula:</span>\n                <span class=\"value\">${data.beneficiaryId}</span>\n            </div>\n            <div class=\"row\">\n                <span class=\"label\">Banco:</span>\n                <span class=\"value\">${data.bankName}</span>\n            </div>\n            <div class=\"row\">\n                <span class=\"label\">Cuenta:</span>\n                <span class=\"value\">${data.accountNumber}</span>\n            </div>\n            <div class=\"row\">\n                <span class=\"label\">Teléfono:</span>\n                <span class=\"value\">${data.phone}</span>\n            </div>\n        </div>\n\n        <!-- MONTOS -->\n        <div class=\"section\">\n            <div class=\"section-title\">Montos</div>\n            <div class=\"row\">\n                <span class=\"label\">Entrada:</span>\n                <span class=\"value\">${data.amountInput}</span>\n            </div>\n            <div class=\"row\">\n                <span class=\"label\">TRM/BCV:</span>\n                <span class=\"value\">${data.bcvApplied}</span>\n            </div>\n            <div class=\"amount-highlight\">\n                Bs. ${data.amountBs}\n            </div>\n\n        </div>\n\n        <!-- EJECUCIÓN -->\n        <div class=\"section\">\n            <div class=\"row\">\n                <span class=\"label\">Tipo:</span>\n                <span class=\"value\">${data.executionType}</span>\n            </div>\n            ${\n              data.executedByName\n                ? `\n            <div class=\"row\">\n                <span class=\"label\">Ejecutado por:</span>\n                <span class=\"value-1\">${data.executedByName}</span>\n            </div>\n            `\n                : ''\n            }\n        </div>\n\n        <div class=\"status-completed\">✓ GIRO COMPLETADO</div>\n\n        <!-- FOOTER -->\n        <div class=\"footer\">\n            <div style=\"margin-bottom: 5px;\">Impreso: ${data.timestamp}</div>\n            <div style=\"margin-bottom: 10px;\">Gracias por su confianza</div>\n            <div style=\"font-size: 10px; letter-spacing: 2px;\">${data.giroId.toUpperCase()}</div>\n        </div>\n    </div>\n</body>\n</html>\n    `\n  }\n\n  const handlePrint = () => {\n    if (!ticketData) return\n\n    const html = generateThermalHTML(ticketData)\n\n    // Crear iframe para impresión\n    const iframe = printFrameRef.current\n    if (!iframe) return\n\n    const iframeDoc = iframe.contentDocument || iframe.contentWindow?.document\n    if (!iframeDoc) return\n\n    iframeDoc.open()\n    iframeDoc.write(html)\n    iframeDoc.close()\n\n    // Esperar a que el contenido se cargue antes de imprimir\n    setTimeout(() => {\n      if (autoSavePrinter && printerName) {\n        // Intentar imprimir con la impresora preconfigurada\n        try {\n          iframe.contentWindow?.print()\n          toast.success(`Imprimiendo con ${printerName}...`)\n        } catch {\n          toast.error(`Error: No se encontró la impresora \"${printerName}\". Se abrirá el diálogo de impresión.`)\n          iframe.contentWindow?.print()\n        }\n      } else {\n        // Sin impresora configurada, abrir diálogo normal\n        iframe.contentWindow?.print()\n        toast.success('Se abrió la ventana de impresión. Selecciona tu impresora térmica de 80mm.')\n      }\n    }, 500)\n  }\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent className=\"sm:max-w-[360px]\">\n        <SheetHeader onClose={() => onOpenChange(false)}>\n          <SheetTitle>Imprimir Tiquete</SheetTitle>\n        </SheetHeader>\n\n        <SheetBody>\n          {error && (\n            <div className=\"p-4 rounded-lg bg-red-50 border border-red-200 mb-4\">\n              <p className=\"text-sm text-red-800\">{error}</p>\n            </div>\n          )}\n\n          {/* Printer Configuration Status */}\n          {!loading && ticketData && autoSavePrinter && printerName && (\n            <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-start gap-2\">\n              <Settings className=\"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\" />\n              <div>\n                <p className=\"text-sm font-medium text-green-900\">Impresora configurada</p>\n                <p className=\"text-xs text-green-700\">{printerName} (Térmica 80mm)</p>\n              </div>\n            </div>\n          )}\n\n          {loading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : ticketData ? (\n            <div className=\"space-y-4\">\n              {/* Preview del tiquete */}\n              <div className=\"border rounded-lg bg-white p-4 max-h-96 overflow-y-auto\">\n                <div\n                  style={{\n                    fontFamily: \"'Courier New', monospace\",\n                    fontSize: '11px',\n                    width: '240px',\n                    margin: '0 auto',\n                    lineHeight: '1.3',\n                    whiteSpace: 'pre-wrap',\n                    wordWrap: 'break-word',\n                  }}\n                >\n                  <div style={{ textAlign: 'center', fontWeight: 'bold', marginBottom: '5px' }}>\n                    {ticketData.companyName}\n                  </div>\n                  <div style={{ textAlign: 'center', fontSize: '10px', marginBottom: '10px' }}>\n                    {ticketData.companyPhone}\n                  </div>\n                  <div style={{ textAlign: 'center', marginBottom: '10px' }}>================================</div>\n\n                  <div style={{ marginBottom: '10px' }}>\n                    <strong>GIRO #{ticketData.giroId}</strong>\n                  </div>\n\n                  <div style={{ marginBottom: '10px', borderTop: '1px dashed #000', paddingTop: '5px' }}>\n                    <div>Beneficiario:</div>\n                    <div style={{ fontWeight: 'bold' }}>{ticketData.beneficiaryName}</div>\n                    <div>Cédula: {ticketData.beneficiaryId}</div>\n                    <div>Banco: {ticketData.bankName}</div>\n                    <div>Cuenta: {ticketData.accountNumber}</div>\n                  </div>\n\n                  <div style={{ marginBottom: '10px', borderTop: '1px dashed #000', paddingTop: '5px' }}>\n                    <div>Entrada: {ticketData.amountInput}</div>\n                    <div style={{ textAlign: 'center', fontWeight: 'bold', margin: '5px 0' }}>\n                      Bs. {ticketData.amountBs}\n                    </div>\n                    <div>TRM: {ticketData.bcvApplied}</div>\n                  </div>\n\n                  <div style={{ marginBottom: '10px', borderTop: '1px dashed #000', paddingTop: '5px' }}>\n                    <div>Tipo: {ticketData.executionType}</div>\n                    {ticketData.executedByName && <div>Ejecutado por: {ticketData.executedByName}</div>}\n                  </div>\n\n                  <div style={{ textAlign: 'center', marginTop: '10px', fontSize: '10px' }}>\n                    Impreso: {ticketData.timestamp}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"p-4 rounded-lg bg-blue-50 border border-blue-200 text-sm text-blue-800\">\n                {autoSavePrinter && printerName\n                  ? `Imprimirá directamente en: ${printerName}`\n                  : 'Selecciona tu impresora térmica de 80mm cuando se abra la ventana de impresión.'}\n              </div>\n            </div>\n          ) : null}\n\n          <div className=\"flex gap-2 pt-4 border-t sticky bottom-0 bg-background\">\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)} className=\"flex-1\">\n              <X className=\"h-4 w-4 mr-2\" />\n              Cerrar\n            </Button>\n            <Button onClick={handlePrint} disabled={loading || !ticketData} className=\"flex-1\">\n              <Printer className=\"h-4 w-4 mr-2\" />\n              Imprimir\n            </Button>\n          </div>\n        </SheetBody>\n\n        {/* iframe invisible para impresión */}\n        <iframe ref={printFrameRef} style={{ display: 'none' }} title=\"print-frame\" />\n      </SheetContent>\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\PrinterDetectionDialog.tsx","messages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `(p:·{·name?:·string;·displayName?:·string·})·=>·p.name·||·p.displayName·||·'Impresora·desconocida'` with `⏎············(p:·{·name?:·string;·displayName?:·string·})·=>·p.name·||·p.displayName·||·'Impresora·desconocida'⏎··········`","line":31,"column":53,"nodeType":null,"messageId":"replace","endLine":31,"endColumn":151,"fix":{"range":[1131,1229],"text":"\n            (p: { name?: string; displayName?: string }) => p.name || p.displayName || 'Impresora desconocida'\n          "}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetBody } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Printer } from 'lucide-react'\nimport { toast } from 'sonner'\n\ninterface PrinterDetectionDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onSelectPrinter: (printerName: string) => void\n}\n\nexport function PrinterDetectionDialog({ open, onOpenChange, onSelectPrinter }: PrinterDetectionDialogProps) {\n  const [printers, setPrinters] = useState<string[]>([])\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    if (open) {\n      detectPrinters()\n    }\n  }, [open])\n\n  const detectPrinters = async () => {\n    setLoading(true)\n    try {\n      // Usar la Web Print API si está disponible\n      if ('getPrinters' in navigator) {\n        // @ts-expect-error - Web Print API no está en los tipos de TypeScript\n        const detectedPrinters = await navigator.getPrinters?.()\n        if (detectedPrinters && detectedPrinters.length > 0) {\n          const printerNames = detectedPrinters.map((p: { name?: string; displayName?: string }) => p.name || p.displayName || 'Impresora desconocida')\n          setPrinters(printerNames)\n          if (printerNames.length === 0) {\n            toast.info('No se detectaron impresoras disponibles')\n          }\n        } else {\n          // Si no hay impresoras detectadas, mostrar instrucciones\n          toast.info('No se detectaron impresoras. Por favor ingresa el nombre manualmente.')\n          setPrinters([])\n        }\n      } else {\n        // Alternativa: usar window.print() para detectar impresoras disponibles\n        // Esto abrirá el diálogo de impresión del navegador que permite ver impresoras\n        toast.info(\n          'Tu navegador no soporta detección automática de impresoras. Se abrirá el diálogo de impresión del navegador para que veas las disponibles.'\n        )\n\n        // Crear un iframe invisible para abrir el diálogo de impresión\n        const iframe = document.createElement('iframe')\n        iframe.style.display = 'none'\n        iframe.setAttribute('srcdoc', '<html><body>Detectando impresoras...</body></html>')\n        document.body.appendChild(iframe)\n\n        setTimeout(() => {\n          iframe.contentWindow?.print()\n          // Limpiar el iframe después de que se abra el diálogo\n          document.body.removeChild(iframe)\n          toast.info('Por favor, verifica las impresoras disponibles en el diálogo que se abrió')\n        }, 500)\n      }\n    } catch (error) {\n      console.error('Error detecting printers:', error)\n      toast.error('Error al detectar impresoras')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent>\n        <SheetHeader onClose={() => onOpenChange(false)}>\n          <SheetTitle>Detectar Impresoras Disponibles</SheetTitle>\n        </SheetHeader>\n\n        <SheetBody>\n          <div className=\"space-y-4\">\n            {loading ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n              </div>\n            ) : printers.length > 0 ? (\n              <div className=\"space-y-3\">\n                <p className=\"text-sm text-muted-foreground\">Selecciona una impresora de la lista:</p>\n                <div className=\"space-y-2\">\n                  {printers.map((printer) => (\n                    <button\n                      key={printer}\n                      onClick={() => {\n                        onSelectPrinter(printer)\n                        onOpenChange(false)\n                      }}\n                      className=\"w-full p-3 border rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all flex items-center gap-2 text-left\"\n                    >\n                      <Printer className=\"h-4 w-4 text-blue-600\" />\n                      <span className=\"text-sm font-medium\">{printer}</span>\n                    </button>\n                  ))}\n                </div>\n                <Button onClick={detectPrinters} variant=\"outline\" className=\"w-full\">\n                  Detectar nuevamente\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <p className=\"text-sm text-blue-800\">\n                    <strong>Nota:</strong> No se detectaron impresoras automáticamente. Por favor:\n                  </p>\n                  <ol className=\"text-sm text-blue-700 mt-2 list-decimal list-inside space-y-1\">\n                    <li>Asegúrate de que tu impresora esté conectada y encendida</li>\n                    <li>Ingresa el nombre de tu impresora manualmente en el campo superior</li>\n                    <li>O abre el diálogo de impresión del navegador (Ctrl+P) para ver impresoras disponibles</li>\n                  </ol>\n                </div>\n                <Button\n                  onClick={() => {\n                    // Abrir el diálogo de impresión para que el usuario vea las impresoras disponibles\n                    window.print()\n                    onOpenChange(false)\n                  }}\n                  variant=\"outline\"\n                  className=\"w-full\"\n                >\n                  Abrir Diálogo de Impresión\n                </Button>\n              </div>\n            )}\n          </div>\n        </SheetBody>\n      </SheetContent>\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\QueryErrorFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\QueryMetricsPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\RechargeAmountsManager.tsx","messages":[{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎··················`","line":167,"column":84,"nodeType":null,"messageId":"insert","endLine":167,"endColumn":84,"fix":{"range":[5411,5411],"text":"\n                  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `··`","line":168,"column":1,"nodeType":null,"messageId":"delete","endLine":168,"endColumn":3,"fix":{"range":[5467,5469],"text":""}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport { Trash2, Plus, Edit2 } from 'lucide-react'\n\ninterface RechargeAmount {\n  id: string\n  amountBs: number\n  isActive: boolean\n}\n\nexport function RechargeAmountsManager() {\n  const [amounts, setAmounts] = useState<RechargeAmount[]>([])\n  const [loading, setLoading] = useState(true)\n  const [newAmount, setNewAmount] = useState('')\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [editingAmount, setEditingAmount] = useState('')\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    loadAmounts()\n  }, [])\n\n  const loadAmounts = async () => {\n    try {\n      setLoading(true)\n      const data = await api.get<RechargeAmount[]>('/recharge-amounts/all')\n      setAmounts(data)\n    } catch (error) {\n      console.error('Error loading amounts:', error)\n      toast.error('Error al cargar montos')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAdd = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!newAmount || Number(newAmount) <= 0) {\n      toast.error('Por favor ingresa un monto válido')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const newAmountData = await api.post<RechargeAmount>('/recharge-amounts', {\n        amountBs: Number(newAmount),\n      })\n      setAmounts([...amounts, newAmountData].sort((a, b) => a.amountBs - b.amountBs))\n      setNewAmount('')\n      toast.success('Monto creado exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al crear monto'\n      toast.error(message)\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleUpdate = async (id: string) => {\n    if (!editingAmount || Number(editingAmount) <= 0) {\n      toast.error('Por favor ingresa un monto válido')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const updated = await api.put<RechargeAmount>(`/recharge-amounts/${id}`, {\n        amountBs: Number(editingAmount),\n      })\n      setAmounts(amounts.map((amt) => (amt.id === id ? updated : amt)).sort((a, b) => a.amountBs - b.amountBs))\n      setEditingId(null)\n      setEditingAmount('')\n      toast.success('Monto actualizado exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al actualizar monto'\n      toast.error(message)\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!window.confirm('¿Estás seguro de que deseas eliminar este monto?')) {\n      return\n    }\n\n    try {\n      await api.delete(`/recharge-amounts/${id}`)\n      setAmounts(amounts.filter((amt) => amt.id !== id))\n      toast.success('Monto eliminado exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al eliminar monto'\n      toast.error(message)\n    }\n  }\n\n  const startEdit = (amount: RechargeAmount) => {\n    setEditingId(amount.id)\n    setEditingAmount(amount.amountBs.toString())\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Gestionar Montos de Recarga</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Form */}\n        <form onSubmit={handleAdd} className=\"space-y-4 p-4 bg-gray-50 rounded\">\n          <h3 className=\"font-semibold text-sm\">{editingId ? 'Editar Monto' : 'Nuevo Monto en Bolívares'}</h3>\n\n          <div>\n            <Label htmlFor=\"amountBs\">Monto (Bs)</Label>\n            <Input\n              id=\"amountBs\"\n              type=\"number\"\n              placeholder=\"Ej: 50000\"\n              step=\"1\"\n              value={editingId ? editingAmount : newAmount}\n              onChange={(e) => (editingId ? setEditingAmount(e.target.value) : setNewAmount(e.target.value))}\n            />\n          </div>\n\n          <div className=\"flex gap-2\">\n            {editingId ? (\n              <>\n                <Button type=\"button\" onClick={() => handleUpdate(editingId)} disabled={submitting} size=\"sm\">\n                  Guardar Cambios\n                </Button>\n                <Button\n                  type=\"button\"\n                  onClick={() => {\n                    setEditingId(null)\n                    setEditingAmount('')\n                  }}\n                  variant=\"outline\"\n                  size=\"sm\"\n                >\n                  Cancelar\n                </Button>\n              </>\n            ) : (\n              <Button type=\"submit\" disabled={submitting} size=\"sm\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Agregar Monto\n              </Button>\n            )}\n          </div>\n        </form>\n\n        {/* List */}\n        {loading ? (\n          <div className=\"text-center py-8 text-gray-500\">Cargando...</div>\n        ) : amounts.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">No hay montos registrados</div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n            {amounts.map((amount) => (\n              <div\n                key={amount.id}\n                className={`flex items-center justify-between p-4 rounded border ${amount.isActive ? 'bg-white' : 'bg-gray-100 opacity-60'\n                  }`}\n              >\n                <div>\n                  <p className=\"font-bold text-lg\">{amount.amountBs.toLocaleString('es-VE')} Bs</p>\n                </div>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => startEdit(amount)}\n                    className=\"p-2 hover:bg-blue-100 rounded transition-colors\"\n                    title=\"Editar\"\n                  >\n                    <Edit2 className=\"h-4 w-4 text-blue-600\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(amount.id)}\n                    className=\"p-2 hover:bg-red-100 rounded transition-colors\"\n                    title=\"Eliminar\"\n                  >\n                    <Trash2 className=\"h-4 w-4 text-red-600\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\RechargeBalanceSheet.tsx","messages":[{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎··················`","line":130,"column":53,"nodeType":null,"messageId":"insert","endLine":130,"endColumn":53,"fix":{"range":[4651,4651],"text":"\n                  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `··`","line":131,"column":1,"nodeType":null,"messageId":"delete","endLine":131,"endColumn":3,"fix":{"range":[4724,4726],"text":""}}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":2,"fixableWarningCount":0,"source":"import { useState, useMemo } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetBody } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport type { BankAccount } from '@/types/api'\nimport { Wallet, MinusCircle, PlusCircle } from 'lucide-react'\nimport { NumericFormat } from 'react-number-format'\n\ninterface RechargeBalanceSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  account: BankAccount | null\n  onBalanceUpdated: () => void\n}\n\nexport function RechargeBalanceSheet({ open, onOpenChange, account, onBalanceUpdated }: RechargeBalanceSheetProps) {\n  const [loading, setLoading] = useState(false)\n  const [amount, setAmount] = useState('')\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('es-VE', {\n      style: 'currency',\n      currency: 'VES',\n      minimumFractionDigits: 2,\n    }).format(value)\n  }\n\n  // Lógica para determinar el monto numérico y el tipo de operación\n  const numericAmount = useMemo(() => {\n    const val = parseFloat(amount)\n    return isNaN(val) ? 0 : val\n  }, [amount])\n\n  const isRecharge = numericAmount > 0\n  const isAdjustment = numericAmount < 0\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    // Validación: El monto debe ser diferente de cero\n    if (numericAmount === 0) {\n      toast.error('Ingresa un monto diferente de cero para recargar o ajustar.')\n      return\n    }\n\n    if (!account) return\n\n    // **NOTA IMPORTANTE:** El endpoint /api/bank-account/update debe estar configurado\n    // en el backend para manejar montos negativos y restarlos al saldo.\n    try {\n      setLoading(true)\n      await api.patch('/bank-account/update', {\n        bankAccountId: account.id,\n        amount: numericAmount, // Se envía el monto con el signo (+ o -)\n      })\n\n      setAmount('')\n      onBalanceUpdated()\n\n      // Mensaje dinámico basado en la operación\n      if (isRecharge) {\n        toast.success('Saldo recargado exitosamente')\n      } else {\n        toast.success('Ajuste de saldo realizado exitosamente')\n      }\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al modificar saldo'\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (!account) return null\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent>\n        <SheetHeader onClose={() => onOpenChange(false)}>\n          {/* Título unificado para recarga y ajuste */}\n          <SheetTitle>Modificar Saldo (Recarga / Ajuste)</SheetTitle>\n        </SheetHeader>\n\n        <SheetBody>\n          {/* Account Info */}\n          <div className=\"mb-6 p-4 rounded-lg bg-muted\">\n            <p className=\"text-sm text-muted-foreground mb-1\">Cuenta</p>\n            <p className=\"font-semibold\">{account.bank.name}</p>\n            <p className=\"text-sm text-muted-foreground mt-2\">Titular: {account.accountHolder}</p>\n            <div className=\"flex items-center gap-2 mt-3 pt-3 border-t\">\n              <Wallet className=\"h-4 w-4 text-green-600\" />\n              <span className=\"text-sm text-muted-foreground\">Saldo actual:</span>\n              <span className=\"font-bold text-green-600\">{formatCurrency(account.balance)}</span>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Amount */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"amount\" className=\"text-base\">\n                Monto de Recarga o Ajuste (Bs)\n              </Label>\n              <NumericFormat\n                id=\"amount\"\n                customInput={Input}\n                thousandSeparator=\".\"\n                decimalSeparator=\",\"\n                decimalScale={2}\n                fixedDecimalScale={false}\n                prefix=\"\"\n                value={amount}\n                onValueChange={(values) => {\n                  setAmount(values.floatValue !== undefined ? values.floatValue.toString() : '')\n                }}\n                placeholder=\"Ej: 15,00 o -5,00\"\n                allowNegative={true}\n                required\n                autoFocus\n                className=\"text-lg h-12\"\n              />\n              <p className=\"text-xs text-muted-foreground\">💡 Positivo para recargar, negativo para restar saldo.</p>\n            </div>\n\n            {/* Preview */}\n            {numericAmount !== 0 && (\n              <div\n                className={`rounded-lg p-4 border ${isRecharge ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'\n                  }`}\n              >\n                <div className=\"flex items-center mb-2\">\n                  {isRecharge ? (\n                    <PlusCircle className=\"h-4 w-4 text-green-600 mr-2\" />\n                  ) : (\n                    <MinusCircle className=\"h-4 w-4 text-red-600 mr-2\" />\n                  )}\n                  <p className={`text-sm font-medium ${isRecharge ? 'text-green-900' : 'text-red-900'}`}>\n                    {isRecharge ? 'Nuevo saldo estimado:' : 'Saldo tras ajuste:'}\n                  </p>\n                </div>\n                <p className={`text-2xl font-bold ${isRecharge ? 'text-green-600' : 'text-red-600'}`}>\n                  {formatCurrency(account.balance + numericAmount)}\n                </p>\n              </div>\n            )}\n\n            {/* Buttons */}\n            <div className=\"flex gap-3 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"flex-1\"\n                onClick={() => onOpenChange(false)}\n                disabled={loading}\n              >\n                Cancelar\n              </Button>\n              <Button\n                type=\"submit\"\n                className=\"flex-1 bg-[linear-gradient(to_right,#136BBC,#274565)]\"\n                disabled={loading || numericAmount === 0}\n              >\n                {loading ? 'Procesando...' : isAdjustment ? 'Realizar Ajuste' : 'Recargar Saldo'}\n              </Button>\n            </div>\n          </form>\n        </SheetBody>\n      </SheetContent>\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\RechargeMinoristaBalanceSheet.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'minorista'. Either include it or remove the dependency array.","line":139,"column":6,"nodeType":"ArrayExpression","endLine":139,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [open, minorista.id, minorista]","fix":{"range":[5137,5158],"text":"[open, minorista.id, minorista]"}}]},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎················`","line":220,"column":88,"nodeType":null,"messageId":"insert","endLine":220,"endColumn":88,"fix":{"range":[7965,7965],"text":"\n                "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":221,"column":1,"nodeType":null,"messageId":"insert","endLine":221,"endColumn":1,"fix":{"range":[7986,7986],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":222,"column":1,"nodeType":null,"messageId":"insert","endLine":222,"endColumn":1,"fix":{"range":[8036,8036],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `··`","line":223,"column":1,"nodeType":null,"messageId":"delete","endLine":223,"endColumn":3,"fix":{"range":[8119,8121],"text":""}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎················`","line":230,"column":88,"nodeType":null,"messageId":"insert","endLine":230,"endColumn":88,"fix":{"range":[8407,8407],"text":"\n                "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":231,"column":1,"nodeType":null,"messageId":"insert","endLine":231,"endColumn":1,"fix":{"range":[8430,8430],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":232,"column":1,"nodeType":null,"messageId":"insert","endLine":232,"endColumn":1,"fix":{"range":[8480,8480],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `··`","line":233,"column":1,"nodeType":null,"messageId":"delete","endLine":233,"endColumn":3,"fix":{"range":[8563,8565],"text":""}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `⏎················`","line":240,"column":88,"nodeType":null,"messageId":"insert","endLine":240,"endColumn":88,"fix":{"range":[8864,8864],"text":"\n                "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":241,"column":1,"nodeType":null,"messageId":"insert","endLine":241,"endColumn":1,"fix":{"range":[8884,8884],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Insert `··`","line":242,"column":1,"nodeType":null,"messageId":"insert","endLine":242,"endColumn":1,"fix":{"range":[8934,8934],"text":"  "}},{"ruleId":"prettier/prettier","severity":2,"message":"Delete `··`","line":243,"column":1,"nodeType":null,"messageId":"delete","endLine":243,"endColumn":3,"fix":{"range":[9017,9019],"text":""}}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchTransactions'. Either include it or remove the dependency array.","line":147,"column":6,"nodeType":"ArrayExpression","endLine":147,"endColumn":56,"suggestions":[{"desc":"Update the dependencies array to be: [open, activeTab, page, dateRange, localMinorista, fetchTransactions]","fix":{"range":[5400,5450],"text":"[open, activeTab, page, dateRange, localMinorista, fetchTransactions]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":12,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport type { Minorista, MinoristaTransaction, MinoristaTransactionType } from '@/types/api'\nimport { AlertCircle, Eye, DollarSign, Calendar, ChevronDown } from 'lucide-react'\nimport { MinoristaSimpleTransactionTable } from './MinoristaSimpleTransactionTable'\nimport { type DateRange } from './DateRangeFilter'\nimport { NumericFormat } from 'react-number-format'\n\ninterface RechargeMinoristaBalanceSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  minorista: Minorista | null\n  onBalanceUpdated: () => void\n}\n\nexport function RechargeMinoristaBalanceSheet({\n  open,\n  onOpenChange,\n  minorista,\n  onBalanceUpdated,\n}: RechargeMinoristaBalanceSheetProps) {\n  const [loading, setLoading] = useState(false)\n  const [payAmount, setPayAmount] = useState('')\n  const [creditLimitAmount, setCreditLimitAmount] = useState('')\n  const [activeTab, setActiveTab] = useState('view')\n  const [transactions, setTransactions] = useState<MinoristaTransaction[]>([])\n  const [transactionsLoading, setTransactionsLoading] = useState(false)\n  const [localMinorista, setLocalMinorista] = useState<Minorista | null>(minorista)\n  const [page, setPage] = useState(1)\n  const [totalPages, setTotalPages] = useState(1)\n\n  // Standardized Date Filter State\n  const dateInputRef = useRef<HTMLInputElement>(null)\n  const [filterType, setFilterType] = useState<'SINGLE' | 'CUSTOM'>('SINGLE')\n  const [singleDate, setSingleDate] = useState(new Date().toISOString().split('T')[0])\n  const [isFilterExpanded, setIsFilterExpanded] = useState(false)\n\n  const today = new Date()\n  const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0, 0).toISOString()\n  const endOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 23, 59, 59, 999).toISOString()\n\n  const [dateRange, setDateRange] = useState<DateRange>({\n    from: startOfDay,\n    to: endOfDay,\n    startDate: today.toISOString().split('T')[0],\n    endDate: today.toISOString().split('T')[0],\n  })\n  const [typeFilter, setTypeFilter] = useState<MinoristaTransactionType | 'ALL'>('ALL')\n\n  const handleSingleDateChange = (date: string) => {\n    setSingleDate(date)\n    setFilterType('SINGLE')\n\n    const [year, month, day] = date.split('-').map(Number)\n    const fromDate = new Date(year, month - 1, day, 0, 0, 0, 0)\n    const toDate = new Date(year, month - 1, day, 23, 59, 59, 999)\n\n    setDateRange({\n      from: fromDate.toISOString(),\n      to: toDate.toISOString(),\n      startDate: date,\n      endDate: date,\n    })\n    setPage(1)\n  }\n\n  const handleCustomDateChange = (field: 'startDate' | 'endDate', value: string) => {\n    const newRange = { ...dateRange, [field]: value }\n\n    if (newRange.startDate && newRange.endDate) {\n      const [fromYear, fromMonth, fromDay] = newRange.startDate.split('-').map(Number)\n      const [toYear, toMonth, toDay] = newRange.endDate.split('-').map(Number)\n\n      const fromDate = new Date(fromYear, fromMonth - 1, fromDay, 0, 0, 0, 0)\n      const toDate = new Date(toYear, toMonth - 1, toDay, 23, 59, 59, 999)\n\n      newRange.from = fromDate.toISOString()\n      newRange.to = toDate.toISOString()\n    }\n\n    setDateRange(newRange)\n    setPage(1)\n  }\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('es-CO', {\n      style: 'currency',\n      currency: 'COP',\n      minimumFractionDigits: 0,\n    }).format(value)\n  }\n\n  const fetchTransactions = async () => {\n    if (!localMinorista) return\n    try {\n      setTransactionsLoading(true)\n      let url = `/minorista/${localMinorista.id}/transactions?page=${page}&limit=10`\n\n      if (dateRange.from && dateRange.to) {\n        url += `&startDate=${encodeURIComponent(dateRange.from)}&endDate=${encodeURIComponent(dateRange.to)}`\n      }\n\n      const response = await api.get<{\n        transactions: MinoristaTransaction[]\n        pagination: { total: number; page: number; limit: number; totalPages: number }\n      }>(url)\n      setTransactions(response.transactions || [])\n      setTotalPages(response.pagination.totalPages)\n    } catch (error) {\n      console.error('Error loading transactions:', error)\n    } finally {\n      setTransactionsLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    setLocalMinorista(minorista)\n  }, [minorista])\n\n  // Cargar datos iniciales cuando se abre el modal\n  useEffect(() => {\n    if (open && minorista) {\n      const loadUpdatedMinorista = async () => {\n        try {\n          const response = await api.get<{ minorista: Minorista }>(`/minorista/${minorista.id}`)\n          setLocalMinorista(response.minorista)\n        } catch (error) {\n          console.error('Error loading updated minorista:', error)\n        }\n      }\n      loadUpdatedMinorista()\n    }\n  }, [open, minorista?.id])\n\n  // Cargar transacciones cuando cambia la paginación o filtros\n  useEffect(() => {\n    if (open && activeTab === 'view' && localMinorista) {\n      fetchTransactions()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, activeTab, page, dateRange, localMinorista])\n\n  const handlePayDebt = async (e: React.FormEvent) => {\n    e.preventDefault()\n    const numericAmount = parseFloat(payAmount)\n    if (isNaN(numericAmount) || numericAmount === 0) {\n      toast.error('Ingresa un monto válido')\n      return\n    }\n    if (!localMinorista) return\n\n    try {\n      setLoading(true)\n      await api.post(`/minorista/${localMinorista.id}/pay-debt`, {\n        amount: numericAmount,\n      })\n      setPayAmount('')\n      onBalanceUpdated()\n      toast.success('Deuda pagada exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al pagar deuda'\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSetCreditLimit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    const numericAmount = parseFloat(creditLimitAmount)\n    if (isNaN(numericAmount) || numericAmount < 0) {\n      toast.error('Ingresa un monto válido')\n      return\n    }\n    if (!localMinorista) return\n\n    try {\n      setLoading(true)\n      const response = await api.post<{ minorista: Minorista }>(`/minorista/${localMinorista.id}/credit-limit`, {\n        creditLimit: numericAmount,\n      })\n      setLocalMinorista(response.minorista)\n      setCreditLimitAmount('')\n      onBalanceUpdated() // Invalidar query para actualizar la lista\n      toast.success('Cupo de crédito asignado exitosamente')\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al asignar cupo'\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (!localMinorista) return null\n\n  const hasDebt = localMinorista.availableCredit < 0\n  // Deuda real = Cupo - (Crédito Disponible + Saldo a Favor)\n  // El saldo a favor también es dinero disponible del minorista\n  const totalAvailable = localMinorista.availableCredit + (localMinorista.creditBalance || 0)\n  const debtAmount = Math.max(0, localMinorista.creditLimit - totalAvailable)\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent>\n        <SheetHeader onClose={() => onOpenChange(false)}>\n          <SheetTitle>{localMinorista.user.fullName}</SheetTitle>\n        </SheetHeader>\n\n        <div className=\"w-full mt-6 space-y-4 px-4 sm:px-6 md:px-6 pb-5\">\n          {/* Tab Navigation */}\n          <div className=\"flex gap-2 border-b\">\n            <button\n              onClick={() => setActiveTab('view')}\n              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${activeTab === 'view'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-muted-foreground hover:text-foreground'\n                }`}\n            >\n              <Eye className=\"h-4 w-4 inline mr-2\" />\n              Ver\n            </button>\n            <button\n              onClick={() => setActiveTab('assign')}\n              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${activeTab === 'assign'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-muted-foreground hover:text-foreground'\n                }`}\n            >\n              <DollarSign className=\"h-4 w-4 inline mr-2\" />\n              Asignar Cupo\n            </button>\n            <button\n              onClick={() => setActiveTab('pay')}\n              className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${activeTab === 'pay'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-muted-foreground hover:text-foreground'\n                }`}\n            >\n              <DollarSign className=\"h-4 w-4 inline mr-2\" />\n              Pagar Deuda\n            </button>\n          </div>\n\n          {/* Vista General */}\n          {activeTab === 'view' && (\n            <div className=\"space-y-4\">\n              {/* Minorista Info */}\n              <div className=\"p-4 rounded-lg bg-muted\">\n                <p className=\"text-sm text-muted-foreground mb-1\">Minorista</p>\n                <p className=\"font-semibold\">{localMinorista.user.fullName}</p>\n                <p className=\"text-sm text-muted-foreground\">{localMinorista.user.email}</p>\n              </div>\n\n              {/* Resumen de Crédito */}\n              <div className=\"grid grid-cols-1 gap-3\">\n                <div className=\"p-3 rounded-lg bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700\">\n                  <p className=\"text-xs text-muted-foreground mb-1\">Cupo Asignado</p>\n                  <p className=\"text-lg font-semibold\">{formatCurrency(localMinorista.creditLimit)}</p>\n                </div>\n                <div className=\"p-3 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800\">\n                  <p className=\"text-xs text-muted-foreground mb-1\">Crédito Disponible</p>\n                  <p className=\"text-lg font-semibold text-green-600\">\n                    {formatCurrency(localMinorista.availableCredit)}\n                  </p>\n                </div>\n                {localMinorista.creditBalance > 0 && (\n                  <div className=\"p-3 rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">Saldo a Favor</p>\n                    <p className=\"text-lg font-semibold text-blue-600\">\n                      {formatCurrency(localMinorista.creditBalance)}\n                    </p>\n                  </div>\n                )}\n                {debtAmount > 0 && (\n                  <div className=\"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">Deuda Actual</p>\n                    <p className=\"text-lg font-semibold text-red-600\">{formatCurrency(debtAmount)}</p>\n                  </div>\n                )}\n              </div>\n\n              {hasDebt && (\n                <div className=\"flex items-start gap-2 p-3 bg-red-50 dark:bg-red-950 rounded border border-red-200 dark:border-red-800\">\n                  <AlertCircle className=\"h-4 w-4 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5\" />\n                  <p className=\"text-xs text-red-700 dark:text-red-300\">\n                    Este minorista tiene deuda. Usa la pestaña \"Pagar Deuda\" para abonar fondos y reducir la deuda.\n                  </p>\n                </div>\n              )}\n\n              {/* Historial de Transacciones */}\n              <div className=\"mt-6 pt-6 border-t space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"font-semibold\">Historial Detallado de Transacciones</h3>\n                </div>\n\n                {/* Filter Tabs */}\n                <div className=\"flex gap-2 flex-wrap\">\n                  <Button\n                    variant={typeFilter === 'ALL' ? 'default' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setTypeFilter('ALL')}\n                  >\n                    Todas\n                  </Button>\n                  <Button\n                    variant={typeFilter === 'DISCOUNT' ? 'default' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setTypeFilter('DISCOUNT')}\n                  >\n                    Giros\n                  </Button>\n                  <Button\n                    variant={typeFilter === 'RECHARGE' ? 'default' : 'outline'}\n                    size=\"sm\"\n                    onClick={() => setTypeFilter('RECHARGE')}\n                  >\n                    Abonos\n                  </Button>\n                </div>\n\n                {/* Date Filter */}\n                <Card className=\"mb-4\">\n                  <CardHeader\n                    className=\"cursor-pointer hover:bg-accent/50 transition-colors py-3 px-4\"\n                    onClick={() => setIsFilterExpanded(!isFilterExpanded)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-base\">Filtrar por Fecha</CardTitle>\n                      {isFilterExpanded ? (\n                        <ChevronDown className=\"h-4 w-4 rotate-180 transition-transform\" />\n                      ) : (\n                        <ChevronDown className=\"h-4 w-4 transition-transform\" />\n                      )}\n                    </div>\n                  </CardHeader>\n\n                  {isFilterExpanded && (\n                    <CardContent className=\"space-y-4 pt-0 px-4 pb-4\">\n                      <div className=\"flex flex-col gap-4\">\n                        <div className=\"flex gap-2 overflow-x-auto pb-2 flex-wrap\">\n                          <Button\n                            variant={filterType === 'SINGLE' ? 'default' : 'outline'}\n                            size=\"sm\"\n                            className={`relative overflow-hidden ${filterType === 'SINGLE' ? 'text-white' : ''}`}\n                            style={\n                              filterType === 'SINGLE'\n                                ? { background: 'linear-gradient(to right, #136BBC, #274565)' }\n                                : {}\n                            }\n                            onClick={() => dateInputRef.current?.showPicker()}\n                          >\n                            <Calendar className=\"mr-2 h-3 w-3\" />\n                            {singleDate === new Date().toISOString().split('T')[0]\n                              ? 'Ver día (Hoy)'\n                              : `Ver día: ${singleDate}`}\n                          </Button>\n\n                          <input\n                            ref={dateInputRef}\n                            type=\"date\"\n                            value={singleDate}\n                            onChange={(e) => {\n                              if (e.target.value) handleSingleDateChange(e.target.value)\n                            }}\n                            className=\"absolute opacity-0 pointer-events-none w-0 h-0\"\n                            tabIndex={-1}\n                          />\n\n                          <Button\n                            variant={filterType === 'CUSTOM' ? 'default' : 'outline'}\n                            size=\"sm\"\n                            onClick={() => setFilterType('CUSTOM')}\n                            className={filterType === 'CUSTOM' ? 'text-white' : ''}\n                            style={\n                              filterType === 'CUSTOM'\n                                ? { background: 'linear-gradient(to right, #136BBC, #274565)' }\n                                : {}\n                            }\n                          >\n                            <Calendar className=\"h-3 w-3 mr-1\" />\n                            Personalizado\n                          </Button>\n                        </div>\n\n                        {filterType === 'CUSTOM' && (\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 items-end animate-in fade-in slide-in-from-top-2 duration-200\">\n                            <div>\n                              <Label className=\"mb-2 block\">Desde</Label>\n                              <Input\n                                type=\"date\"\n                                value={dateRange.startDate || ''}\n                                onChange={(e) => handleCustomDateChange('startDate', e.target.value)}\n                                className=\"w-full\"\n                              />\n                            </div>\n                            <div>\n                              <Label className=\"mb-2 block\">Hasta</Label>\n                              <Input\n                                type=\"date\"\n                                value={dateRange.endDate || ''}\n                                onChange={(e) => handleCustomDateChange('endDate', e.target.value)}\n                                className=\"w-full\"\n                              />\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  )}\n                </Card>\n\n                {/* Transactions */}\n                {transactionsLoading ? (\n                  <div className=\"text-center py-4\">\n                    <p className=\"text-sm text-muted-foreground\">Cargando historial...</p>\n                  </div>\n                ) : (\n                  <>\n                    <MinoristaSimpleTransactionTable\n                      transactions={transactions}\n                      typeFilter={typeFilter}\n                      creditLimit={localMinorista?.creditLimit || 0}\n                    />\n\n                    {/* Pagination Controls */}\n                    {totalPages > 1 && (\n                      <div className=\"flex items-center justify-center gap-2 pt-4 border-t\">\n                        <Button variant=\"outline\" size=\"sm\" disabled={page === 1} onClick={() => setPage(page - 1)}>\n                          Anterior\n                        </Button>\n                        <span className=\"text-sm text-muted-foreground\">\n                          Página {page} de {totalPages}\n                        </span>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          disabled={page === totalPages}\n                          onClick={() => setPage(page + 1)}\n                        >\n                          Siguiente\n                        </Button>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Asignar Cupo */}\n          {activeTab === 'assign' && (\n            <div className=\"space-y-4\">\n              <div className=\"p-4 rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 space-y-2\">\n                <p className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                  Asignar o Modificar Cupo de Crédito\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  El cupo se puede modificar en cualquier momento después de su asignación inicial.\n                </p>\n              </div>\n\n              <form onSubmit={handleSetCreditLimit} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"credit-limit\">Nuevo Cupo de Crédito (COP)</Label>\n                  <NumericFormat\n                    id=\"credit-limit\"\n                    customInput={Input}\n                    thousandSeparator=\".\"\n                    decimalSeparator=\",\"\n                    decimalScale={2}\n                    fixedDecimalScale={false}\n                    prefix=\"\"\n                    value={creditLimitAmount}\n                    onValueChange={(values) => {\n                      setCreditLimitAmount(values.floatValue ? values.floatValue.toString() : '')\n                    }}\n                    placeholder=\"0\"\n                    allowNegative={false}\n                    required\n                  />\n                  <p className=\"text-xs text-muted-foreground\">\n                    Cupo actual: {formatCurrency(localMinorista.creditLimit)}\n                  </p>\n                </div>\n\n                {creditLimitAmount && !isNaN(parseFloat(creditLimitAmount)) && (\n                  <div className=\"rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 p-4\">\n                    <p className=\"text-sm text-blue-900 dark:text-blue-100 font-medium mb-2\">Nuevo cupo:</p>\n                    <p className=\"text-2xl font-bold text-blue-600\">{formatCurrency(parseFloat(creditLimitAmount))}</p>\n                  </div>\n                )}\n\n                <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                  {loading ? 'Actualizando...' : 'Asignar Cupo'}\n                </Button>\n              </form>\n            </div>\n          )}\n\n          {/* Pagar Deuda */}\n          {activeTab === 'pay' && (\n            <div className=\"space-y-4\">\n              <div className=\"p-4 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 space-y-2\">\n                <p className=\"text-sm font-medium text-red-900 dark:text-red-100\">Pagar Deuda y Liberar Cupo</p>\n                <p className=\"text-xs text-muted-foreground\">\n                  Paga la deuda acumulada para liberar cupo disponible. Las ganancias acumuladas se reiniciarán.\n                </p>\n              </div>\n\n              <form onSubmit={handlePayDebt} className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"pay-amount\">Monto a Pagar (COP)</Label>\n                  <div className=\"flex gap-2\">\n                    <NumericFormat\n                      id=\"pay-amount\"\n                      customInput={Input}\n                      thousandSeparator=\".\"\n                      decimalSeparator=\",\"\n                      decimalScale={2}\n                      fixedDecimalScale={false}\n                      prefix=\"\"\n                      value={payAmount}\n                      onValueChange={(values) => {\n                        setPayAmount(values.floatValue ? values.floatValue.toString() : '')\n                      }}\n                      placeholder=\"0\"\n                      allowNegative={true}\n                      required\n                    />\n                    <Button\n                      type=\"button\"\n                      onClick={() => setPayAmount(debtAmount.toString())}\n                      variant=\"outline\"\n                      className=\"flex-shrink-0\"\n                      disabled={loading || debtAmount <= 0}\n                    >\n                      Pagar Todo\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">Deuda actual: {formatCurrency(debtAmount)}</p>\n                </div>\n\n                {payAmount && !isNaN(parseFloat(payAmount)) && parseFloat(payAmount) > 0 && (\n                  <div className=\"space-y-3\">\n                    <div className=\"rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 p-4\">\n                      <p className=\"text-sm text-green-900 dark:text-green-100 font-medium mb-2\">\n                        Deuda después del pago:\n                      </p>\n                      <p className=\"text-2xl font-bold text-green-600\">\n                        {formatCurrency(Math.max(0, debtAmount - parseFloat(payAmount)))}\n                      </p>\n                    </div>\n                    {parseFloat(payAmount) > debtAmount && !isNaN(debtAmount) && (\n                      <div className=\"rounded-lg bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 p-4\">\n                        <p className=\"text-sm text-blue-900 dark:text-blue-100 font-medium mb-2\">\n                          Saldo a Favor Después:\n                        </p>\n                        <p className=\"text-2xl font-bold text-blue-600\">\n                          {formatCurrency(parseFloat(payAmount) - debtAmount + localMinorista.creditBalance)}\n                        </p>\n                        <p className=\"text-xs text-blue-700 dark:text-blue-300 mt-2\">Exceso de pago + saldo anterior</p>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <Button type=\"submit\" className=\"w-full\" disabled={loading} variant=\"destructive\">\n                  {loading ? 'Procesando...' : 'Pagar Deuda'}\n                </Button>\n              </form>\n            </div>\n          )}\n        </div>\n      </SheetContent>\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\RechargeOperatorsManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1971,1974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1971,1974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2665,2668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2665,2668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":102,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3138,3141],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3138,3141],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport { Trash2, Plus, Edit2, Phone, Check, X } from 'lucide-react'\n\ninterface RechargeOperator {\n  id: string\n  name: string\n  type: string\n  isActive: boolean\n}\n\nexport function RechargeOperatorsManager() {\n  const [operators, setOperators] = useState<RechargeOperator[]>([])\n  const [loading, setLoading] = useState(true)\n  const [newOperatorName, setNewOperatorName] = useState('')\n  const [newOperatorType, setNewOperatorType] = useState('')\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [editingName, setEditingName] = useState('')\n  const [editingType, setEditingType] = useState('')\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    loadOperators()\n  }, [])\n\n  const loadOperators = async () => {\n    try {\n      setLoading(true)\n      const data = await api.get<RechargeOperator[]>('/recharge-operators/all')\n      setOperators(data)\n    } catch (error) {\n      console.error('Error loading operators:', error)\n      toast.error('Error al cargar operadores')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAdd = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!newOperatorName || !newOperatorType) {\n      toast.error('Por favor completa todos los campos')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const newOperator = await api.post<RechargeOperator>('/recharge-operators', {\n        name: newOperatorName,\n        type: newOperatorType,\n      })\n      setOperators([...operators, newOperator])\n      setNewOperatorName('')\n      setNewOperatorType('')\n      toast.success('Operador creado exitosamente')\n    } catch (error: any) {\n      toast.error(error.message || 'Error al crear operador')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleUpdate = async (id: string) => {\n    if (!editingName || !editingType) {\n      toast.error('Por favor completa todos los campos')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const updated = await api.put<RechargeOperator>(`/recharge-operators/${id}`, {\n        name: editingName,\n        type: editingType,\n      })\n      setOperators(operators.map((op) => (op.id === id ? updated : op)))\n      setEditingId(null)\n      setEditingName('')\n      setEditingType('')\n      toast.success('Operador actualizado exitosamente')\n    } catch (error: any) {\n      toast.error(error.message || 'Error al actualizar operador')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!window.confirm('¿Estás seguro de que deseas eliminar este operador?')) {\n      return\n    }\n\n    try {\n      await api.delete(`/recharge-operators/${id}`)\n      setOperators(operators.filter((op) => op.id !== id))\n      toast.success('Operador eliminado exitosamente')\n    } catch (error: any) {\n      toast.error(error.message || 'Error al eliminar operador')\n    }\n  }\n\n  const startEdit = (operator: RechargeOperator) => {\n    setEditingId(operator.id)\n    setEditingName(operator.name)\n    setEditingType(operator.type)\n  }\n\n  return (\n    <Card>\n      <CardHeader className=\"border-b text-white\" style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}>\n        <CardTitle className=\"flex items-center gap-2 text-lg\">\n          <Phone className=\"h-5 w-5\" />\n          Gestionar Operadores de Recarga\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6 pt-6\">\n        {/* Form */}\n        <form\n          onSubmit={handleAdd}\n          className={`space-y-4 p-6 rounded-lg border-2 transition-all ${\n            editingId ? 'border-blue-200' : 'border-blue-200'\n          }`}\n          style={{ backgroundColor: editingId ? 'rgba(19, 107, 188, 0.05)' : 'rgba(19, 107, 188, 0.05)' }}\n        >\n          <div className=\"flex items-center gap-2\">\n            {editingId ? (\n              <Edit2 className=\"h-5 w-5\" style={{ color: '#136BBC' }} />\n            ) : (\n              <Plus className=\"h-5 w-5\" style={{ color: '#136BBC' }} />\n            )}\n            <h3 className=\"font-bold text-sm\">{editingId ? 'Editar Operador' : 'Nuevo Operador'}</h3>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"operatorName\" className=\"text-xs font-semibold\">\n                Nombre\n              </Label>\n              <Input\n                id=\"operatorName\"\n                placeholder=\"Ej: Movistar\"\n                value={editingId ? editingName : newOperatorName}\n                onChange={(e) => (editingId ? setEditingName(e.target.value) : setNewOperatorName(e.target.value))}\n                className=\"mt-2\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"operatorType\" className=\"text-xs font-semibold\">\n                Tipo\n              </Label>\n              <Input\n                id=\"operatorType\"\n                placeholder=\"Ej: MOVISTAR\"\n                value={editingId ? editingType : newOperatorType}\n                onChange={(e) => (editingId ? setEditingType(e.target.value) : setNewOperatorType(e.target.value))}\n                className=\"mt-2\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-2 pt-2\">\n            {editingId ? (\n              <>\n                <Button\n                  type=\"button\"\n                  onClick={() => handleUpdate(editingId)}\n                  disabled={submitting}\n                  className=\"flex items-center gap-2 text-white\"\n                  style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}\n                >\n                  <Check className=\"h-4 w-4\" />\n                  Guardar Cambios\n                </Button>\n                <Button\n                  type=\"button\"\n                  onClick={() => {\n                    setEditingId(null)\n                    setEditingName('')\n                    setEditingType('')\n                  }}\n                  variant=\"outline\"\n                  className=\"flex items-center gap-2\"\n                  style={{ borderColor: '#136BBC', color: '#136BBC' }}\n                >\n                  <X className=\"h-4 w-4\" />\n                  Cancelar\n                </Button>\n              </>\n            ) : (\n              <Button\n                type=\"submit\"\n                disabled={submitting}\n                className=\"flex items-center gap-2 text-white\"\n                style={{ background: 'linear-gradient(to right, #136BBC, #274565)' }}\n              >\n                <Plus className=\"h-4 w-4\" />\n                Agregar Operador\n              </Button>\n            )}\n          </div>\n        </form>\n\n        {/* List */}\n        <div>\n          <h3 className=\"font-bold text-sm mb-4 text-gray-800\">Operadores Registrados ({operators.length})</h3>\n\n          {loading ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <div className=\"inline-block animate-pulse\">Cargando...</div>\n            </div>\n          ) : operators.length === 0 ? (\n            <div className=\"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-gray-200\">\n              <Phone className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n              <p>No hay operadores registrados</p>\n            </div>\n          ) : (\n            <div className=\"grid gap-3\">\n              {operators.map((operator) => (\n                <div\n                  key={operator.id}\n                  className={`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${\n                    operator.isActive\n                      ? 'border-gray-200 bg-white hover:border-blue-300 hover:shadow-md'\n                      : 'border-gray-200 bg-gray-50 opacity-60'\n                  }`}\n                >\n                  <div className=\"flex-1\">\n                    <p className=\"font-bold text-gray-900\">{operator.name}</p>\n                    <p className=\"text-sm text-gray-600 mt-1\">{operator.type}</p>\n                    {!operator.isActive && (\n                      <span className=\"inline-block mt-2 px-2 py-1 bg-gray-200 text-gray-700 text-xs font-semibold rounded\">\n                        Inactivo\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => startEdit(operator)}\n                      className=\"p-2.5 hover:bg-blue-100 rounded-lg transition-colors\"\n                      style={{ color: '#136BBC' }}\n                      title=\"Editar operador\"\n                      aria-label=\"Editar operador\"\n                    >\n                      <Edit2 className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={() => handleDelete(operator.id)}\n                      className=\"p-2.5 hover:bg-red-100 rounded-lg transition-colors text-red-600 hover:text-red-800\"\n                      title=\"Eliminar operador\"\n                      aria-label=\"Eliminar operador\"\n                    >\n                      <Trash2 className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\RechargeSheet.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOperators'. Either include it or remove the dependency array.","line":54,"column":6,"nodeType":"ArrayExpression","endLine":54,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [loadOperators, open]","fix":{"range":[1792,1798],"text":"[loadOperators, open]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3619,3622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3619,3622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":166,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5303,5306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5303,5306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport type { ExchangeRate, Minorista } from '@/types/api'\nimport { BalanceInfo } from './BalanceInfo'\n\ninterface RechargeOperator {\n  id: string\n  name: string\n  type: string\n}\n\ninterface RechargeAmount {\n  id: string\n  amountBs: number\n}\n\ninterface OperatorAmount {\n  id: string\n  operator: RechargeOperator\n  amount: RechargeAmount\n  isActive: boolean\n}\n\ninterface RechargeSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function RechargeSheet({ open, onOpenChange }: RechargeSheetProps) {\n  const [selectedOperator, setSelectedOperator] = useState('')\n  const [selectedAmount, setSelectedAmount] = useState('')\n  const [phone, setPhone] = useState('')\n  const [senderName, setSenderName] = useState('')\n  const [operators, setOperators] = useState<RechargeOperator[]>([])\n  const [amounts, setAmounts] = useState<RechargeAmount[]>([])\n  const [exchangeRate, setExchangeRate] = useState<ExchangeRate | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [minoristaBalance, setMinoristaBalance] = useState<number | null>(null)\n  const [minoristaBalanceInFavor, setMinoristaBalanceInFavor] = useState<number | null>(null)\n  const [loadingBalance, setLoadingBalance] = useState(false)\n\n  useEffect(() => {\n    if (open) {\n      loadOperators()\n      loadExchangeRate()\n      fetchMinoristaBalance()\n    }\n  }, [open])\n\n  // Load amounts when operator is selected\n  useEffect(() => {\n    if (selectedOperator) {\n      loadAmountsByOperator(selectedOperator)\n    }\n  }, [selectedOperator])\n\n  const loadOperators = async () => {\n    try {\n      const data = await api.get<RechargeOperator[]>('/recharge-operators')\n      setOperators(data)\n      if (data.length > 0 && !selectedOperator) {\n        setSelectedOperator(data[0].id)\n      }\n    } catch (error) {\n      console.error('Error loading operators:', error)\n      toast.error('Error al cargar los operadores')\n    }\n  }\n\n  const loadAmountsByOperator = async (operatorId: string) => {\n    try {\n      const data = await api.get<OperatorAmount[]>(`/operator-amounts/${operatorId}`)\n      const amounts = data.map((oa) => oa.amount)\n      setAmounts(amounts)\n      if (amounts.length > 0) {\n        setSelectedAmount(amounts[0].id)\n      } else {\n        setSelectedAmount('')\n        toast.warning('Este operador no tiene montos disponibles')\n      }\n    } catch (error) {\n      console.error('Error loading amounts:', error)\n      toast.error('Error al cargar los montos del operador')\n      setAmounts([])\n      setSelectedAmount('')\n    }\n  }\n\n  const loadExchangeRate = async () => {\n    try {\n      const response = await api.get<{ rate: ExchangeRate }>('/exchange-rate/current')\n      setExchangeRate(response.rate)\n    } catch (error) {\n      console.error('Error loading exchange rate:', error)\n      toast.error('Error al cargar la tasa BCV')\n    }\n  }\n\n  const fetchMinoristaBalance = async () => {\n    try {\n      setLoadingBalance(true)\n      const response = await api.get<{ minorista: Minorista }>('/minorista/me')\n      setMinoristaBalance(response.minorista.availableCredit)\n      setMinoristaBalanceInFavor(response.minorista.creditBalance || 0)\n    } catch (error: any) {\n      console.error('Error loading balance:', error)\n      toast.error(error.message || 'Error al cargar balance')\n    } finally {\n      setLoadingBalance(false)\n    }\n  }\n\n  const selectedAmountBs = amounts.find((a) => a.id === selectedAmount)?.amountBs || 0\n\n  const amountCop = exchangeRate ? (selectedAmountBs * Number(exchangeRate.sellRate)).toFixed(2) : '0.00'\n\n  const amountUsd = exchangeRate ? (selectedAmountBs / Number(exchangeRate.bcv)).toFixed(2) : '0.00'\n\n  const getEarnedProfit = () => {\n    return 0 // No profit for recharges\n  }\n\n  const getRemainingBalance = () => {\n    if (minoristaBalance === null || minoristaBalanceInFavor === null) return null\n\n    const totalBalance = minoristaBalance + minoristaBalanceInFavor\n    const amountCopNum = parseFloat(amountCop)\n\n    return totalBalance - amountCopNum\n  }\n\n  const hasInsufficientBalance = () => {\n    if (minoristaBalance === null || minoristaBalanceInFavor === null) return false\n\n    const totalBalance = minoristaBalance + minoristaBalanceInFavor\n    const amountCopNum = parseFloat(amountCop)\n\n    return totalBalance < amountCopNum\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!selectedOperator || !selectedAmount || !phone || !senderName) {\n      toast.error('Por favor completa todos los campos')\n      return\n    }\n\n    setLoading(true)\n    try {\n      await api.post('/giro/recharge/create', {\n        operatorId: selectedOperator,\n        amountBsId: selectedAmount,\n        phone,\n        contactoEnvia: senderName,\n      })\n      toast.success('Recarga registrada exitosamente')\n      onOpenChange(false)\n      resetForm()\n    } catch (error: any) {\n      toast.error(error.message || 'Error al procesar la recarga')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const resetForm = () => {\n    setSelectedOperator('')\n    setSelectedAmount('')\n    setPhone('')\n    setSenderName('Pepito')\n  }\n\n  return (\n    <Sheet open={open} onOpenChange={onOpenChange}>\n      <SheetContent>\n        <SheetHeader onClose={() => onOpenChange(false)}>\n          <SheetTitle>Recarga de Saldo</SheetTitle>\n        </SheetHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4 mt-6 px-6\">\n          <div>\n            <Label htmlFor=\"operator\">Operador</Label>\n            <Select value={selectedOperator} onValueChange={setSelectedOperator}>\n              <SelectTrigger id=\"operator\">\n                <SelectValue placeholder=\"Selecciona un operador\" />\n              </SelectTrigger>\n              <SelectContent>\n                {operators.map((operator) => (\n                  <SelectItem key={operator.id} value={operator.id}>\n                    {operator.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"amount\">Monto en Bs</Label>\n            <Select value={selectedAmount} onValueChange={setSelectedAmount}>\n              <SelectTrigger id=\"amount\">\n                <SelectValue placeholder=\"Selecciona un monto\" />\n              </SelectTrigger>\n              <SelectContent>\n                {amounts.map((amount) => (\n                  <SelectItem key={amount.id} value={amount.id}>\n                    {amount.amountBs.toLocaleString('es-VE')} Bs\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div>\n            <Label htmlFor=\"phone\">Teléfono</Label>\n            <Input id=\"phone\" placeholder=\"04141234567\" value={phone} onChange={(e) => setPhone(e.target.value)} />\n          </div>\n\n          <div>\n            <Label htmlFor=\"senderName\">Contacto que Envía</Label>\n            <Input\n              id=\"senderName\"\n              placeholder=\"Nombre del remitente\"\n              value={senderName}\n              onChange={(e) => setSenderName(e.target.value)}\n            />\n          </div>\n\n          <div className=\"bg-gray-50 p-3 rounded border space-y-2\">\n            <div className=\"text-sm font-medium\">Conversiones</div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-600\">COP:</span>\n              <span className=\"font-semibold\">${amountCop}</span>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-gray-600\">USD:</span>\n              <span className=\"font-semibold\">${amountUsd}</span>\n            </div>\n          </div>\n\n          {!loadingBalance && minoristaBalance !== null && (\n            <BalanceInfo\n              minoristaBalance={minoristaBalance}\n              minoristaBalanceInFavor={minoristaBalanceInFavor}\n              amountInput={amountCop}\n              getEarnedProfit={getEarnedProfit}\n              getRemainingBalance={getRemainingBalance}\n              hasInsufficientBalance={hasInsufficientBalance}\n            />\n          )}\n\n          <div className=\"mt-6 pb-6 flex gap-3\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              disabled={loading}\n              onClick={() => {\n                onOpenChange(false)\n                resetForm()\n              }}\n              className=\"flex-1\"\n            >\n              Cancelar\n            </Button>\n            <Button type=\"submit\" disabled={loading || hasInsufficientBalance()} className=\"flex-1\">\n              {loading ? 'Procesando...' : 'Registrar Recarga'}\n            </Button>\n          </div>\n        </form>\n      </SheetContent>\n    </Sheet>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ThemeProvider.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":52,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":52,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState } from 'react'\n\ntype Theme = 'dark' | 'light' | 'system'\n\ntype ThemeProviderProps = {\n  children: React.ReactNode\n  defaultTheme?: Theme\n  storageKey?: string\n}\n\ntype ThemeProviderState = {\n  theme: Theme\n  setTheme: (theme: Theme) => void\n}\n\nconst initialState: ThemeProviderState = {\n  theme: 'system',\n  setTheme: () => null,\n}\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState)\n\nexport function ThemeProvider({ children, defaultTheme = 'system', storageKey = 'vite-ui-theme' }: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(() => (localStorage.getItem(storageKey) as Theme) || defaultTheme)\n\n  useEffect(() => {\n    const root = window.document.documentElement\n\n    root.classList.remove('light', 'dark')\n\n    if (theme === 'system') {\n      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\n\n      root.classList.add(systemTheme)\n      return\n    }\n\n    root.classList.add(theme)\n  }, [theme])\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      localStorage.setItem(storageKey, theme)\n      setTheme(theme)\n    },\n  }\n\n  return <ThemeProviderContext.Provider {...{ value }}>{children}</ThemeProviderContext.Provider>\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext)\n\n  if (context === undefined) throw new Error('useTheme must be used within a ThemeProvider')\n\n  return context\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\TransferencistaAccountsSheet.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1541,1544],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1541,1544],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAccounts'. Either include it or remove the dependency array.","line":52,"column":6,"nodeType":"ArrayExpression","endLine":52,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAccounts, open, transferencistaId]","fix":{"range":[1771,1796],"text":"[fetchAccounts, open, transferencistaId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetBody } from '@/components/ui/sheet'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Plus, Building2, Wallet, ArrowUpCircle } from 'lucide-react'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport { CreateBankAccountSheet } from '@/components/CreateBankAccountSheet'\nimport { RechargeBalanceSheet } from '@/components/RechargeBalanceSheet'\nimport type { BankAccount } from '@/types/api'\n\ninterface TransferencistaAccountsSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  transferencistaId: string | null\n  transferencistaName: string\n}\n\nexport function TransferencistaAccountsSheet({\n  open,\n  onOpenChange,\n  transferencistaId,\n  transferencistaName,\n}: TransferencistaAccountsSheetProps) {\n  const [accounts, setAccounts] = useState<BankAccount[]>([])\n  const [loading, setLoading] = useState(false)\n  const [createSheetOpen, setCreateSheetOpen] = useState(false)\n  const [rechargeSheetOpen, setRechargeSheetOpen] = useState(false)\n  const [selectedAccount, setSelectedAccount] = useState<BankAccount | null>(null)\n\n  const fetchAccounts = async () => {\n    if (!transferencistaId) return\n\n    try {\n      setLoading(true)\n      const response = await api.get<{ bankAccounts: BankAccount[] }>(\n        `/bank-account/transferencista/${transferencistaId}`\n      )\n      setAccounts(response.bankAccounts || [])\n    } catch (error: any) {\n      toast.error('Error al cargar cuentas bancarias')\n      console.error(error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    if (open && transferencistaId) {\n      fetchAccounts()\n    }\n  }, [open, transferencistaId])\n\n  const handleAccountCreated = () => {\n    setCreateSheetOpen(false)\n    fetchAccounts()\n    toast.success('Cuenta bancaria creada exitosamente')\n  }\n\n  const handleRecharge = (account: BankAccount) => {\n    setSelectedAccount(account)\n    setRechargeSheetOpen(true)\n  }\n\n  const handleBalanceUpdated = () => {\n    setRechargeSheetOpen(false)\n    setSelectedAccount(null)\n    fetchAccounts()\n  }\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('es-VE', {\n      style: 'currency',\n      currency: 'VES',\n      minimumFractionDigits: 2,\n    }).format(amount)\n  }\n\n  return (\n    <>\n      <Sheet open={open} onOpenChange={onOpenChange}>\n        <SheetContent>\n          <SheetHeader onClose={() => onOpenChange(false)}>\n            <SheetTitle>Cuentas Bancarias</SheetTitle>\n            <p className=\"text-sm text-muted-foreground mt-1\">{transferencistaName}</p>\n          </SheetHeader>\n\n          <SheetBody>\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">Cargando cuentas...</p>\n              </div>\n            ) : accounts.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Building2 className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                <p className=\"text-muted-foreground mb-4\">No hay cuentas bancarias registradas</p>\n                <Button onClick={() => setCreateSheetOpen(true)}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Agregar primera cuenta\n                </Button>\n              </div>\n            ) : (\n              <>\n                <div className=\"space-y-3 mb-20\">\n                  {accounts.map((account) => (\n                    <Card key={account.id}>\n                      <CardContent className=\"p-4\">\n                        {/* Bank Name */}\n                        <div className=\"flex items-center gap-2 mb-3\">\n                          <Building2 className=\"h-5 w-5 text-muted-foreground\" />\n                          <p className=\"font-semibold text-lg\">{account.bank.name}</p>\n                        </div>\n\n                        {/* Account Details */}\n                        <div className=\"space-y-2 text-sm\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-muted-foreground\">Titular:</span>\n                            <span className=\"font-medium\">{account.accountHolder}</span>\n                          </div>\n\n                          {/* Balance */}\n                          <div className=\"flex items-center justify-between mt-3 pt-3 border-t\">\n                            <div className=\"flex items-center gap-2\">\n                              <Wallet className=\"h-4 w-4 text-green-600\" />\n                              <span className=\"text-muted-foreground\">Saldo:</span>\n                              <span className=\"font-bold text-lg text-green-600\">\n                                {formatCurrency(account.balance)}\n                              </span>\n                            </div>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handleRecharge(account)}\n                              className=\"gap-2\"\n                            >\n                              <ArrowUpCircle className=\"h-4 w-4\" />\n                              Recargar\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n\n                {/* Add Account Button */}\n                <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-background border-t\">\n                  <Button className=\"w-full\" onClick={() => setCreateSheetOpen(true)}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Agregar cuenta bancaria\n                  </Button>\n                </div>\n              </>\n            )}\n          </SheetBody>\n        </SheetContent>\n      </Sheet>\n\n      {/* Create Bank Account Sheet */}\n      {transferencistaId && (\n        <CreateBankAccountSheet\n          open={createSheetOpen}\n          onOpenChange={setCreateSheetOpen}\n          transferencistaId={transferencistaId}\n          transferencistaName={transferencistaName}\n          onAccountCreated={handleAccountCreated}\n        />\n      )}\n\n      {/* Recharge Balance Sheet */}\n      <RechargeBalanceSheet\n        open={rechargeSheetOpen}\n        onOpenChange={setRechargeSheetOpen}\n        account={selectedAccount}\n        onBalanceUpdated={handleBalanceUpdated}\n      />\n    </>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\UpdatePrompt.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleUpdate'. Either include it or remove the dependency array.","line":55,"column":6,"nodeType":"ArrayExpression","endLine":55,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [handleUpdate, needRefresh]","fix":{"range":[1675,1688],"text":"[handleUpdate, needRefresh]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\nimport { useRegisterSW } from 'virtual:pwa-register/react'\nimport { Button } from '@/components/ui/button'\nimport { RefreshCw } from 'lucide-react'\nimport { toast } from 'sonner'\n\nexport function UpdatePrompt() {\n  const [showPrompt, setShowPrompt] = useState(false)\n\n  const {\n    needRefresh: [needRefresh],\n    updateServiceWorker,\n  } = useRegisterSW({\n    onRegisteredSW(swUrl, registration) {\n      console.log('Service Worker registrado:', swUrl)\n\n      // Check for updates every 60 seconds\n      if (registration) {\n        setInterval(() => {\n          registration.update()\n        }, 60 * 1000)\n      }\n    },\n    onRegisterError(error) {\n      console.error('Error al registrar Service Worker:', error)\n    },\n  })\n\n  useEffect(() => {\n    if (needRefresh) {\n      setShowPrompt(true)\n\n      // Show persistent toast with update button\n      toast(\n        <div className=\"flex items-center justify-between gap-4 w-full\">\n          <div className=\"flex items-center gap-3\">\n            <RefreshCw className=\"h-5 w-5 text-blue-600\" />\n            <div>\n              <p className=\"font-semibold text-sm\">Nueva versión disponible</p>\n              <p className=\"text-xs text-muted-foreground\">Actualiza para ver los últimos cambios</p>\n            </div>\n          </div>\n          <Button size=\"sm\" onClick={handleUpdate} className=\"bg-blue-600 hover:bg-blue-700 text-white\">\n            Actualizar\n          </Button>\n        </div>,\n        {\n          duration: Infinity, // Persistent toast\n          id: 'pwa-update',\n          position: 'bottom-center',\n          closeButton: false,\n        }\n      )\n    }\n  }, [needRefresh])\n\n  const handleUpdate = () => {\n    setShowPrompt(false)\n    toast.dismiss('pwa-update')\n    updateServiceWorker(true)\n  }\n\n  // Floating update button (optional - only shows if user dismissed the toast)\n  if (showPrompt && !needRefresh) {\n    return (\n      <div className=\"fixed bottom-20 right-4 z-50 animate-bounce\">\n        <Button\n          onClick={handleUpdate}\n          className=\"rounded-full h-12 w-12 p-0 bg-blue-600 hover:bg-blue-700 text-white shadow-lg\"\n          title=\"Actualizar aplicación\"\n        >\n          <RefreshCw className=\"h-5 w-5\" />\n        </Button>\n      </div>\n    )\n  }\n\n  return null\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\forms\\MobilePaymentForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\forms\\RechargeForm.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadOperators'. Either include it or remove the dependency array.","line":58,"column":6,"nodeType":"ArrayExpression","endLine":58,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [isMinorista, loadOperators]","fix":{"range":[1904,1917],"text":"[isMinorista, loadOperators]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Loader2 } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { api } from '@/lib/api'\nimport { toast } from 'sonner'\nimport { useAuth } from '@/contexts/AuthContext'\nimport type { ExchangeRate, Minorista } from '@/types/api'\nimport { BalanceInfo } from '@/components/BalanceInfo'\nimport { formatCurrency } from '@/lib/formatCurrency'\n\ninterface RechargeOperator {\n  id: string\n  name: string\n  type: string\n}\n\ninterface RechargeAmount {\n  id: string\n  amountBs: number\n}\n\ninterface OperatorAmount {\n  id: string\n  operator: RechargeOperator\n  amount: RechargeAmount\n  isActive: boolean\n}\n\ninterface RechargeFormProps {\n  onSuccess: () => void\n}\n\nexport function RechargeForm({ onSuccess }: RechargeFormProps) {\n  const { user } = useAuth()\n  const [selectedOperator, setSelectedOperator] = useState('')\n  const [selectedAmount, setSelectedAmount] = useState('')\n  const [phone, setPhone] = useState('')\n  const [senderName, setSenderName] = useState('Pepito')\n  const [operators, setOperators] = useState<RechargeOperator[]>([])\n  const [amounts, setAmounts] = useState<RechargeAmount[]>([])\n  const [exchangeRate, setExchangeRate] = useState<ExchangeRate | null>(null)\n  const [loading, setLoading] = useState(false)\n  const [minoristaBalance, setMinoristaBalance] = useState<number | null>(null)\n  const [minoristaBalanceInFavor, setMinoristaBalanceInFavor] = useState<number | null>(null)\n  const [loadingBalance, setLoadingBalance] = useState(false)\n\n  const isMinorista = user?.role === 'MINORISTA'\n\n  useEffect(() => {\n    loadOperators()\n    loadExchangeRate()\n    if (isMinorista) {\n      fetchMinoristaBalance()\n    }\n  }, [isMinorista])\n\n  useEffect(() => {\n    if (selectedOperator) {\n      loadAmountsByOperator(selectedOperator)\n    }\n  }, [selectedOperator])\n\n  const loadOperators = async () => {\n    try {\n      const data = await api.get<RechargeOperator[]>('/recharge-operators')\n      setOperators(data)\n      if (data.length > 0 && !selectedOperator) {\n        setSelectedOperator(data[0].id)\n      }\n    } catch (error) {\n      console.error('Error loading operators:', error)\n      toast.error('Error al cargar los operadores')\n    }\n  }\n\n  const loadAmountsByOperator = async (operatorId: string) => {\n    try {\n      const data = await api.get<OperatorAmount[]>(`/operator-amounts/${operatorId}`)\n      const amounts = data.map((oa) => oa.amount)\n      setAmounts(amounts)\n      if (amounts.length > 0) {\n        setSelectedAmount(amounts[0].id)\n      } else {\n        setSelectedAmount('')\n        toast.warning('Este operador no tiene montos disponibles')\n      }\n    } catch (error) {\n      console.error('Error loading amounts:', error)\n      toast.error('Error al cargar los montos del operador')\n      setAmounts([])\n      setSelectedAmount('')\n    }\n  }\n\n  const loadExchangeRate = async () => {\n    try {\n      const response = await api.get<{ rate: ExchangeRate }>('/exchange-rate/current')\n      setExchangeRate(response.rate)\n    } catch (error) {\n      console.error('Error loading exchange rate:', error)\n      toast.error('Error al cargar la tasa BCV')\n    }\n  }\n\n  const fetchMinoristaBalance = async () => {\n    try {\n      setLoadingBalance(true)\n      const response = await api.get<{ minorista: Minorista }>('/minorista/me')\n      setMinoristaBalance(response.minorista.availableCredit)\n      setMinoristaBalanceInFavor(response.minorista.creditBalance || 0)\n    } catch (error) {\n      console.error('Error loading balance:', error)\n      const message = error instanceof Error ? error.message : 'Error al cargar balance'\n      toast.error(message)\n    } finally {\n      setLoadingBalance(false)\n    }\n  }\n\n  const selectedAmountBs = amounts.find((a) => a.id === selectedAmount)?.amountBs || 0\n\n  const amountCop = exchangeRate ? (selectedAmountBs * Number(exchangeRate.sellRate)).toFixed(2) : '0.00'\n\n  const amountUsd = exchangeRate ? (selectedAmountBs / Number(exchangeRate.bcv)).toFixed(2) : '0.00'\n\n  const getEarnedProfit = () => {\n    const amount = parseFloat(amountCop) || 0\n    if (amount <= 0) return 0\n    return amount * 0.05\n  }\n\n  const getRemainingBalance = () => {\n    if (minoristaBalance === null || minoristaBalanceInFavor === null) return null\n\n    const totalBalance = minoristaBalance + minoristaBalanceInFavor\n    const amountCopNum = parseFloat(amountCop) || 0\n    const profit = getEarnedProfit() || 0\n\n    return totalBalance - amountCopNum + profit\n  }\n\n  const hasInsufficientBalance = () => {\n    if (minoristaBalance === null || minoristaBalanceInFavor === null) return false\n\n    const totalBalance = minoristaBalance + minoristaBalanceInFavor\n    const amountCopNum = parseFloat(amountCop)\n\n    return totalBalance < amountCopNum\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!selectedOperator || !selectedAmount || !phone || !senderName) {\n      toast.error('Por favor completa todos los campos')\n      return\n    }\n\n    setLoading(true)\n    try {\n      await api.post('/giro/recharge/create', {\n        operatorId: selectedOperator,\n        amountBsId: selectedAmount,\n        phone,\n        contactoEnvia: senderName,\n      })\n      toast.success('Recarga registrada exitosamente')\n      resetForm()\n      if (isMinorista) {\n        fetchMinoristaBalance()\n      }\n      onSuccess()\n      onSuccess()\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Error al procesar la recarga'\n      toast.error(message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const resetForm = () => {\n    setSelectedOperator('')\n    setSelectedAmount('')\n    setPhone('')\n    setSenderName('')\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n      <div>\n        <Label htmlFor=\"operator\" className=\"hidden md:block\">\n          Operador\n        </Label>\n        <Select value={selectedOperator} onValueChange={setSelectedOperator}>\n          <SelectTrigger id=\"operator\">\n            <SelectValue placeholder=\"Selecciona un operador\" />\n          </SelectTrigger>\n          <SelectContent>\n            {operators.map((operator) => (\n              <SelectItem key={operator.id} value={operator.id}>\n                {operator.name}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"amount\" className=\"hidden md:block\">\n          Monto en Bs\n        </Label>\n        <Select value={selectedAmount} onValueChange={setSelectedAmount}>\n          <SelectTrigger id=\"amount\">\n            <SelectValue placeholder=\"Selecciona un monto\" />\n          </SelectTrigger>\n          <SelectContent>\n            {amounts.map((amount) => (\n              <SelectItem key={amount.id} value={amount.id}>\n                {amount.amountBs.toLocaleString('es-VE')} Bs\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div>\n        <Label htmlFor=\"phone\" className=\"hidden md:block\">\n          Teléfono\n        </Label>\n        <Input id=\"phone\" placeholder=\"Teléfono\" value={phone} onChange={(e) => setPhone(e.target.value)} required />\n      </div>\n\n      {/* <div>\n        <Label htmlFor=\"senderName\" className=\"hidden md:block\">\n          Contacto que Envía\n        </Label>\n        <Input\n          id=\"senderName\"\n          placeholder=\"Nombre del remitente\"\n          value={senderName}\n          onChange={(e) => setSenderName(e.target.value)}\n          required\n        />\n      </div> */}\n\n      <div className=\"bg-gray-50 dark:bg-gray-900 p-3 rounded border space-y-2\">\n        <div className=\"text-sm font-medium\">Conversiones</div>\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-gray-600 dark:text-gray-400\">COP:</span>\n          <span className=\"font-semibold\">{formatCurrency(Number(amountCop), 'COP')}</span>\n        </div>\n        <div className=\"flex justify-between items-center\">\n          <span className=\"text-gray-600 dark:text-gray-400\">BCV:</span>\n          <span className=\"font-semibold\">{formatCurrency(Number(amountUsd), 'BCV')}</span>\n        </div>\n      </div>\n\n      {!loadingBalance && minoristaBalance !== null && (\n        <BalanceInfo\n          minoristaBalance={minoristaBalance}\n          minoristaBalanceInFavor={minoristaBalanceInFavor}\n          amountInput={amountCop}\n          getEarnedProfit={getEarnedProfit}\n          getRemainingBalance={getRemainingBalance}\n          hasInsufficientBalance={hasInsufficientBalance}\n        />\n      )}\n\n      {/* Submit */}\n      <div className=\"flex gap-3 pt-4\">\n        <Button\n          type=\"submit\"\n          disabled={loading || hasInsufficientBalance()}\n          className=\"w-full bg-[linear-gradient(to_right,#136BBC,#274565)] hover:opacity-90 transition-opacity\"\n        >\n          {loading ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Procesando...\n            </>\n          ) : (\n            'Enviar Recarga'\n          )}\n        </Button>\n      </div>\n    </form>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\forms\\TransferForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\skeletons\\GiroDetailSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":30,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":30,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":6,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":6,"endColumn":24,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[195,350],"text":"type ProgressProps = React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":37,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":37,"endColumn":24,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1076,1141],"text":"type TabsListProps = HTMLAttributes<HTMLDivElement>"},"desc":"Replace empty interface with a type alias."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\contexts\\AuthContext.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":63,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":63,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\firebase\\firebase-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\firebase\\messaging.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\mutations\\useExchangeRateMutations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\mutations\\useGiroMutations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useBankQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useDashboardQueries.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[932,935],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[932,935],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from '@tanstack/react-query'\nimport { api } from '@/lib/api'\nimport { applyDedupConfig } from '@/lib/deduplication'\n\ninterface DashboardStats {\n  girosCount?: number\n  girosLabel?: string\n  fees?: number\n  volumeBs?: number\n  volumeCOP?: number\n  volumeUSD?: number\n  systemEarnings?: number\n  minoristaEarnings?: number\n  earnings?: number\n  processingToday?: number\n  completedToday?: number\n}\n\nexport function useDashboardStats() {\n  return useQuery({\n    queryKey: ['dashboard', 'stats'],\n    queryFn: async () => {\n      const response = await api.get<DashboardStats>('/dashboard/stats')\n      return response\n    },\n    ...applyDedupConfig('NORMAL'), // 5 min - stats cambian moderadamente\n  })\n}\n\nexport function useMinoristaBalance(userRole?: string) {\n  return useQuery({\n    queryKey: ['minorista', 'balance'],\n    queryFn: async () => {\n      const response = await api.get<{ balance: number; credit: any }>('/minorista/me')\n      return response\n    },\n    ...applyDedupConfig('NORMAL'), // 5 min - balance actualiza regularmente\n    enabled: userRole === 'MINORISTA',\n  })\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useExchangeRateQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useGiroPaginatedQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useGiroQueries.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[892,895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[892,895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from '@tanstack/react-query'\nimport { api } from '@/lib/api'\nimport { applyDedupConfig } from '@/lib/deduplication'\nimport type { Giro, MinoristaTransaction } from '@/types/api'\n\ninterface GirosListParams {\n  status?: string\n  dateFrom?: string\n  dateTo?: string\n  page?: number\n  limit?: number\n}\n\nexport function useGirosList(params?: GirosListParams) {\n  const queryString = params\n    ? new URLSearchParams(\n        Object.entries(params).reduce(\n          (acc, [key, value]) => {\n            if (value !== undefined && value !== null && value !== '') {\n              acc[key] = String(value)\n            }\n            return acc\n          },\n          {} as Record<string, string>\n        )\n      ).toString()\n    : ''\n\n  return useQuery({\n    queryKey: ['giros', params],\n    queryFn: async () => {\n      const response = await api.get<{ giros: Giro[]; pagination: any }>(\n        `/giro/list${queryString ? `?${queryString}` : ''}`\n      )\n      return response.giros\n    },\n    ...applyDedupConfig('HIGH_PRIORITY'), // 30s - giros cambian rápido\n  })\n}\n\nexport function useGiroDetail(giroId: string | null) {\n  return useQuery({\n    queryKey: ['giro', giroId],\n    queryFn: async () => {\n      if (!giroId) return null\n      const response = await api.get<{ giro: Giro } | Giro>(`/giro/${giroId}`)\n      // The API returns the giro wrapped in a {giro: ...} object, so we unwrap it\n      if (response && typeof response === 'object' && 'giro' in response) {\n        return (response as { giro: Giro }).giro\n      }\n      return response as Giro\n    },\n    ...applyDedupConfig('HIGH_PRIORITY'), // 20s - detalles de giro\n    enabled: !!giroId,\n  })\n}\n\nexport function useRecentGiros(limit: number = 5) {\n  return useQuery({\n    queryKey: ['giros', 'recent'],\n    queryFn: async () => {\n      const response = await api.get<{ giros: Giro[] }>(`/dashboard/recent-giros?limit=${limit}`)\n      return response.giros\n    },\n    ...applyDedupConfig('HIGH_PRIORITY'), // 30s - giros recientes\n  })\n}\n\nexport function useMinoristaTransaction(giroId: string | null) {\n  return useQuery({\n    queryKey: ['giro', giroId, 'minorista-transaction'],\n    queryFn: async () => {\n      if (!giroId) return null\n      return await api.get<MinoristaTransaction>(`/giro/${giroId}/minorista-transaction`)\n    },\n    enabled: !!giroId,\n    staleTime: 1000 * 60 * 5, // 5 minutos\n  })\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useMinoristaQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useReportQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\queries\\useUserQueries.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[470,473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[470,473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from '@tanstack/react-query'\nimport { api } from '@/lib/api'\nimport type { UserRole } from '@/types/api'\n\nexport interface UserData {\n  id: string\n  fullName: string\n  email: string\n  role: UserRole\n  isActive: boolean\n  emailVerified: boolean\n  available?: boolean\n  transferencistaId?: string\n  minoristaId?: string\n  balance?: number\n  creditLimit?: number\n  availableCredit?: number\n  creditBalance?: number\n}\n\ninterface AdminResponse {\n  users: any[]\n}\n\ninterface TransferencistaResponse {\n  transferencistas: {\n    id: string\n    available: boolean\n    user: { id: string }\n  }[]\n}\n\ninterface MinoristaResponse {\n  minoristas: {\n    id: string\n    balance: number\n    creditLimit: number\n    availableCredit: number\n    creditBalance: number\n    user: { id: string }\n  }[]\n}\n\n// Hook for fetching all users by role\nexport function useAllUsers(role?: UserRole | 'ALL' | null) {\n  return useQuery({\n    queryKey: ['users', role],\n    queryFn: async () => {\n      const usersData = await fetchUsersByRole(role)\n      return usersData\n    },\n    enabled: role !== null,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n}\n\n// Hook for fetching transferencistas\nexport function useTransferencistas() {\n  return useQuery({\n    queryKey: ['users', 'TRANSFERENCISTA'],\n    queryFn: async () => {\n      const response = await api.get<AdminResponse>('/user/by-role/TRANSFERENCISTA')\n      const transferencistaResponse = await api.get<TransferencistaResponse>('/transferencista/list')\n\n      const transferencistaMap = new Map(\n        transferencistaResponse.transferencistas.map((t) => [t.user.id, { id: t.id, available: t.available }])\n      )\n\n      return response.users.map((user) => {\n        const transferencistaData = transferencistaMap.get(user.id)\n        return {\n          ...user,\n          available: transferencistaData?.available,\n          transferencistaId: transferencistaData?.id,\n        } as UserData\n      })\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n}\n\n// Hook for fetching minoristas\nexport function useMinoristas() {\n  return useQuery({\n    queryKey: ['users', 'MINORISTA'],\n    queryFn: async () => {\n      const response = await api.get<AdminResponse>('/user/by-role/MINORISTA')\n      const minoristaResponse = await api.get<MinoristaResponse>('/minorista/list')\n\n      const minoristaMap = new Map(\n        minoristaResponse.minoristas.map((m) => [\n          m.user.id,\n          {\n            id: m.id,\n            balance: m.balance,\n            creditLimit: m.creditLimit,\n            availableCredit: m.availableCredit,\n            creditBalance: m.creditBalance,\n          },\n        ])\n      )\n\n      return response.users.map((user) => {\n        const minoristaData = minoristaMap.get(user.id)\n        return {\n          ...user,\n          minoristaId: minoristaData?.id,\n          balance: minoristaData?.balance,\n          creditLimit: minoristaData?.creditLimit,\n          availableCredit: minoristaData?.availableCredit,\n          creditBalance: minoristaData?.creditBalance,\n        } as UserData\n      })\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n}\n\n// Hook for fetching admins\nexport function useAdmins() {\n  return useQuery({\n    queryKey: ['users', 'ADMIN'],\n    queryFn: async () => {\n      const response = await api.get<AdminResponse>('/user/by-role/ADMIN')\n      return response.users as UserData[]\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n}\n\n// Helper function to fetch users by role\nasync function fetchUsersByRole(role?: UserRole | 'ALL' | null): Promise<UserData[]> {\n  if (role && role !== 'ALL') {\n    if (role === 'TRANSFERENCISTA') {\n      const response = await api.get<AdminResponse>(`/user/by-role/${role}`)\n      const transferencistaResponse = await api.get<TransferencistaResponse>('/transferencista/list')\n\n      const transferencistaMap = new Map(\n        transferencistaResponse.transferencistas.map((t) => [t.user.id, { id: t.id, available: t.available }])\n      )\n\n      return response.users.map((user) => {\n        const transferencistaData = transferencistaMap.get(user.id)\n        return {\n          ...user,\n          available: transferencistaData?.available,\n          transferencistaId: transferencistaData?.id,\n        }\n      })\n    }\n\n    if (role === 'MINORISTA') {\n      const response = await api.get<AdminResponse>(`/user/by-role/${role}`)\n      const minoristaResponse = await api.get<MinoristaResponse>('/minorista/list')\n\n      const minoristaMap = new Map(\n        minoristaResponse.minoristas.map((m) => [\n          m.user.id,\n          {\n            id: m.id,\n            balance: m.balance,\n            creditLimit: m.creditLimit,\n            availableCredit: m.availableCredit,\n            creditBalance: m.creditBalance,\n          },\n        ])\n      )\n\n      return response.users.map((user) => {\n        const minoristaData = minoristaMap.get(user.id)\n        return {\n          ...user,\n          minoristaId: minoristaData?.id,\n          balance: minoristaData?.balance,\n          creditLimit: minoristaData?.creditLimit,\n          availableCredit: minoristaData?.availableCredit,\n          creditBalance: minoristaData?.creditBalance,\n        }\n      })\n    }\n\n    // ADMIN or other roles\n    const response = await api.get<AdminResponse>(`/user/by-role/${role}`)\n    return response.users\n  }\n\n  // Fetch all roles\n  const [\n    superAdminsResponse,\n    adminsResponse,\n    transferencistasResponse,\n    minoristasResponse,\n    transferencistaListResponse,\n    minoristaListResponse,\n  ] = await Promise.all([\n    api.get<AdminResponse>('/user/by-role/SUPER_ADMIN').catch(() => ({ users: [] })),\n    api.get<AdminResponse>('/user/by-role/ADMIN'),\n    api.get<AdminResponse>('/user/by-role/TRANSFERENCISTA'),\n    api.get<AdminResponse>('/user/by-role/MINORISTA'),\n    api.get<TransferencistaResponse>('/transferencista/list'),\n    api.get<MinoristaResponse>('/minorista/list'),\n  ])\n\n  const transferencistaMap = new Map(\n    transferencistaListResponse.transferencistas.map((t) => [t.user.id, { id: t.id, available: t.available }])\n  )\n\n  const minoristaMap = new Map(\n    minoristaListResponse.minoristas.map((m) => [\n      m.user.id,\n      {\n        id: m.id,\n        balance: m.balance,\n        creditLimit: m.creditLimit,\n        availableCredit: m.availableCredit,\n        creditBalance: m.creditBalance,\n      },\n    ])\n  )\n\n  const transferencistasData = transferencistasResponse.users.map((user) => {\n    const transferencistaData = transferencistaMap.get(user.id)\n    return {\n      ...user,\n      available: transferencistaData?.available,\n      transferencistaId: transferencistaData?.id,\n    }\n  })\n\n  const minoristasData = minoristasResponse.users.map((user) => {\n    const minoristaData = minoristaMap.get(user.id)\n    return {\n      ...user,\n      minoristaId: minoristaData?.id,\n      balance: minoristaData?.balance,\n      creditLimit: minoristaData?.creditLimit,\n      availableCredit: minoristaData?.availableCredit,\n      creditBalance: minoristaData?.creditBalance,\n    }\n  })\n\n  return [...superAdminsResponse.users, ...adminsResponse.users, ...transferencistasData, ...minoristasData]\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useBeneficiarySuggestions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[754,757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[754,757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback } from 'react'\nimport { useQuery, useQueryClient } from '@tanstack/react-query'\nimport { api } from '@/lib/api'\n\nexport interface BeneficiaryData {\n  name: string\n  id: string\n  phone: string\n  bankId: string\n  accountNumber: string\n  executionType: 'TRANSFERENCIA' | 'PAGO_MOVIL' | 'RECARGA' | 'EFECTIVO' | 'ZELLE' | 'OTROS'\n}\n\nconst BENEFICIARY_SUGGESTIONS_QUERY_KEY = ['beneficiary-suggestions']\n\nexport function useBeneficiarySuggestions() {\n  const queryClient = useQueryClient()\n\n  // Load suggestions from API using React Query\n  const { data: suggestions = [], isLoading } = useQuery({\n    queryKey: BENEFICIARY_SUGGESTIONS_QUERY_KEY,\n    queryFn: async () => {\n      const data = await api.get<{ suggestions: Record<string, any>[] }>('/beneficiary-suggestion/list')\n      return data.suggestions.map((s) => ({\n        name: s.beneficiaryName,\n        id: s.beneficiaryId,\n        phone: s.phone,\n        bankId: s.bankId,\n        accountNumber: s.accountNumber,\n        executionType: s.executionType || 'TRANSFERENCIA',\n      }))\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Add or update a beneficiary suggestion\n  const addSuggestion = useCallback(\n    async (beneficiary: BeneficiaryData) => {\n      try {\n        await api.post('/beneficiary-suggestion/save', {\n          beneficiaryName: beneficiary.name,\n          beneficiaryId: beneficiary.id,\n          phone: beneficiary.phone,\n          bankId: beneficiary.bankId,\n          accountNumber: beneficiary.accountNumber,\n          executionType: beneficiary.executionType,\n        })\n\n        // Invalidate the query to force refetch of updated suggestions\n        await queryClient.invalidateQueries({\n          queryKey: BENEFICIARY_SUGGESTIONS_QUERY_KEY,\n        })\n      } catch (error) {\n        console.error('Error saving beneficiary:', error)\n      }\n    },\n    [queryClient]\n  )\n\n  // Get suggestions based on search query\n  const getSuggestions = useCallback(\n    (\n      query: string,\n      executionType?: 'TRANSFERENCIA' | 'PAGO_MOVIL' | 'RECARGA' | 'EFECTIVO' | 'ZELLE' | 'OTROS'\n    ): BeneficiaryData[] => {\n      const searchLower = query.toLowerCase()\n\n      return suggestions.filter((b) => {\n        // Filter by execution type if provided\n        if (executionType && b.executionType !== executionType) {\n          return false\n        }\n\n        // If no query, return all suggestions of that type\n        if (!query.trim()) {\n          return true\n        }\n\n        // Search by name, ID, or phone\n        return (\n          b.name.toLowerCase().includes(searchLower) ||\n          b.id.toLowerCase().includes(searchLower) ||\n          b.phone.includes(searchLower)\n        )\n      })\n    },\n    [suggestions]\n  )\n\n  // Get suggestions by name\n  const getSuggestionsByName = useCallback(\n    (name: string) => {\n      if (!name.trim()) return []\n      const searchLower = name.toLowerCase()\n      return suggestions.filter((b) => b.name.toLowerCase().includes(searchLower))\n    },\n    [suggestions]\n  )\n\n  // Get suggestions by phone\n  const getSuggestionsByPhone = useCallback(\n    (phone: string) => {\n      if (!phone.trim()) return []\n      return suggestions.filter((b) => b.phone.includes(phone))\n    },\n    [suggestions]\n  )\n\n  // Get suggestions by ID\n  const getSuggestionsById = useCallback(\n    (id: string) => {\n      if (!id.trim()) return []\n      const searchLower = id.toLowerCase()\n      return suggestions.filter((b) => b.id.toLowerCase().includes(searchLower))\n    },\n    [suggestions]\n  )\n\n  // Clear all suggestions\n  const clearAllSuggestions = useCallback(async () => {\n    try {\n      await api.delete('/beneficiary-suggestion')\n      await queryClient.invalidateQueries({\n        queryKey: BENEFICIARY_SUGGESTIONS_QUERY_KEY,\n      })\n    } catch (error) {\n      console.error('Error clearing suggestions:', error)\n    }\n  }, [queryClient])\n\n  return {\n    suggestions,\n    isLoading,\n    addSuggestion,\n    getSuggestions,\n    getSuggestionsByName,\n    getSuggestionsByPhone,\n    getSuggestionsById,\n    clearAllSuggestions,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useDashboardStats.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useGiroWebSocket.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'emitEvent'. Either include it or remove the dependency array.","line":152,"column":6,"nodeType":"ArrayExpression","endLine":152,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [emitEvent]","fix":{"range":[4210,4212],"text":"[emitEvent]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useCallback, useRef } from 'react'\nimport { io, Socket } from 'socket.io-client'\n\nexport interface GiroUpdate {\n  id: string\n  beneficiaryName: string\n  beneficiaryId: string\n  bankName: string\n  accountNumber: string\n  phone: string\n  amountInput: number\n  currencyInput: string\n  amountBs: number\n  bcvValueApplied: number\n  commission: number\n  systemProfit: number\n  minoristaProfit: number\n  status: string\n  executionType: string\n  returnReason?: string\n  proofUrl?: string\n  createdAt: string\n  updatedAt: string\n  completedAt?: string\n  minorista?: { id: string }\n  transferencista?: {\n    id: string\n    user?: {\n      id: string\n      fullName: string\n    }\n  }\n  rateApplied?: {\n    id: string\n    buyRate: number\n    sellRate: number\n    usd: number\n    bcv: number\n    isCustom: boolean\n  }\n  createdBy?: {\n    id: string\n    fullName: string\n  }\n}\n\nexport interface GiroEvent {\n  giro: GiroUpdate\n  timestamp: string\n  changeType?: 'rate' | 'status' | 'beneficiary' | 'other'\n  reason?: string\n}\n\ntype GiroEventListener = (event: GiroEvent) => void\n\n// Obtener URL del backend usando la misma lógica que el cliente API\nconst getBackendUrl = () => {\n  if (import.meta.env.VITE_API_URL) {\n    return import.meta.env.VITE_API_URL\n  }\n\n  // Si no hay VITE_API_URL, intentar usar una URL relativa o el mismo origen\n  // Esto es útil para entornos donde el frontend y el backend están en el mismo dominio\n  // o detrás de un proxy que maneja el enrutamiento.\n  // Para desarrollo local, si el frontend está en 5173 y el backend en 3000,\n  // se puede usar una URL absoluta con el puerto 3000.\n  const hostname = window.location.hostname\n  const protocol = window.location.protocol\n\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    // En desarrollo local, asumir que el backend está en el puerto 3000\n    return `${protocol}//${hostname}:3000`\n  }\n\n  // Para otros entornos (incluyendo devtunnels.ms o producción),\n  // usar el mismo origen. Esto asume que el backend está disponible\n  // en el mismo dominio/puerto que el frontend, posiblemente a través de un proxy.\n  return window.location.origin\n}\n\nexport function useGiroWebSocket() {\n  const socketRef = useRef<Socket | null>(null)\n  const listenersRef = useRef<Map<string, Set<GiroEventListener>>>(new Map())\n\n  // Inicializar la conexión al WebSocket\n  useEffect(() => {\n    try {\n      const backendUrl = getBackendUrl()\n\n      const socket = io(backendUrl, {\n        transports: ['websocket', 'polling'],\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionDelayMax: 5000,\n        reconnectionAttempts: 5,\n      })\n\n      socket.on('connect', () => {\n        // Notificar al servidor que el usuario se conectó\n        const user = JSON.parse(localStorage.getItem('user') || '{}')\n        if (user.id) {\n          const payload = {\n            userId: user.id,\n            role: user.role,\n            minoristaId: user.minoristaId,\n            transferencistaId: user.transferencistaId,\n          }\n          socket.emit('user:connected', payload)\n        }\n      })\n\n      socket.on('disconnect', () => {})\n\n      socket.on('connect_error', () => {})\n\n      // Registrar listeners para eventos de giro\n      socket.on('giro:created', (event: GiroEvent) => {\n        emitEvent('giro:created', event)\n      })\n\n      socket.on('giro:updated', (event: GiroEvent) => {\n        emitEvent('giro:updated', event)\n      })\n\n      socket.on('giro:processing', (event: GiroEvent) => {\n        emitEvent('giro:processing', event)\n      })\n\n      socket.on('giro:executed', (event: GiroEvent) => {\n        emitEvent('giro:executed', event)\n      })\n\n      socket.on('giro:returned', (event: GiroEvent) => {\n        emitEvent('giro:returned', event)\n      })\n\n      socket.on('giro:deleted', (data: { giroId: string; timestamp: string }) => {\n        emitEvent('giro:deleted', {\n          giro: { id: data.giroId } as GiroUpdate,\n          timestamp: data.timestamp,\n        })\n      })\n\n      socketRef.current = socket\n\n      return () => {\n        socket.disconnect()\n      }\n    } catch (error) {\n      console.error('[WS] ❌ Error crítico al inicializar socket.io:', error)\n    }\n  }, [])\n\n  // Función para emitir eventos locales\n  const emitEvent = useCallback((eventType: string, event: GiroEvent) => {\n    const listeners = listenersRef.current.get(eventType)\n    if (listeners) {\n      listeners.forEach((listener) => listener(event))\n    }\n  }, [])\n\n  // Suscribirse a eventos\n  const subscribe = useCallback((eventType: string, listener: GiroEventListener) => {\n    if (!listenersRef.current.has(eventType)) {\n      listenersRef.current.set(eventType, new Set())\n    }\n    listenersRef.current.get(eventType)!.add(listener)\n\n    // Retornar función para desuscribirse\n    return () => {\n      const listeners = listenersRef.current.get(eventType)\n      if (listeners) {\n        listeners.delete(listener)\n      }\n    }\n  }, [])\n\n  return {\n    subscribe,\n    isConnected: socketRef.current?.connected ?? false,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useIsDesktop.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\usePrefetchQueries.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\usePrinterConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useQueryError.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useQueryMonitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useRecentGiros.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\hooks\\useSiaRateImage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\cacheOptimization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\dateUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\deduplication.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\formatCurrency.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\giroUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\queryClient.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\queryInvalidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\lib\\websocketSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[366,369],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[366,369],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\BankAccountsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\BankTransactionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\CalculadoraPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\CalculadoraVesCompraPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\ConfigPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'printerName' and 'printerType'. Either include them or remove the dependency array.","line":47,"column":6,"nodeType":"ArrayExpression","endLine":47,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [getPrinterConfig, printerName, printerType]","fix":{"range":[2181,2199],"text":"[getPrinterConfig, printerName, printerType]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Settings, Search, X, CheckCircle2, AlertCircle, ShieldCheck } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { useAuth } from '@/contexts/AuthContext'\nimport { usePrinterConfig } from '@/hooks/usePrinterConfig'\nimport { PrinterDetectionDialog } from '@/components/PrinterDetectionDialog'\nimport { RechargeOperatorsManager } from '@/components/RechargeOperatorsManager'\nimport { OperatorAmountsManager } from '@/components/OperatorAmountsManager'\nimport { useAllUsers } from '@/hooks/queries/useUserQueries'\nimport { useQueryClient } from '@tanstack/react-query'\nimport { Switch } from '@/components/ui/switch'\nimport { CreateUserSheet } from '@/components/CreateUserSheet'\nimport { cn } from '@/lib/utils'\nimport { api } from '@/lib/api'\n\nexport function ConfigPage() {\n  const { user } = useAuth()\n  const queryClient = useQueryClient()\n  const canAccessOperatorTab =\n    user?.role === 'SUPER_ADMIN' || user?.role === 'ADMIN' || user?.role === 'TRANSFERENCISTA'\n  const [activeTab, setActiveTab] = useState<'operador' | 'admins' | 'impresora'>(\n    canAccessOperatorTab ? 'operador' : 'impresora'\n  )\n  const [printerName, setPrinterName] = useState('')\n  const [printerType, setPrinterType] = useState<'thermal' | 'injection'>('thermal')\n  const [detectionDialogOpen, setDetectionDialogOpen] = useState(false)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [createAdminSheetOpen, setCreateAdminSheetOpen] = useState(false)\n\n  // React Query hook for fetching admins\n  const adminsQuery = useAllUsers(user?.role === 'SUPER_ADMIN' ? 'ADMIN' : null)\n  const admins = adminsQuery.data || []\n  const isLoadingAdmins = adminsQuery.isLoading\n\n  const { getPrinterConfig } = usePrinterConfig()\n\n  // Update form when config loads\n  useEffect(() => {\n    const config = getPrinterConfig()\n    if (config) {\n      if (!printerName) setPrinterName(config.name)\n      if (printerType === 'thermal') setPrinterType(config.type)\n    }\n  }, [getPrinterConfig])\n\n  const handleSelectPrinter = (printerName: string) => {\n    setPrinterName(printerName)\n  }\n\n  const handleToggleAdminActive = async (userId: string, newValue: boolean) => {\n    try {\n      await api.put(`/user/${userId}/toggle-active`, { isActive: newValue })\n      queryClient.invalidateQueries({ queryKey: ['users'] })\n      toast.success(newValue ? 'Admin activado' : 'Admin desactivado')\n    } catch (error) {\n      toast.error('Error al cambiar estado del admin')\n      console.error(error)\n    }\n  }\n\n  const handleAdminCreated = () => {\n    setCreateAdminSheetOpen(false)\n    queryClient.invalidateQueries({ queryKey: ['users'] })\n    toast.success('Admin creado exitosamente')\n  }\n\n  const filteredAdmins = admins.filter((admin) => {\n    const searchLower = searchQuery.toLowerCase()\n    return admin.fullName.toLowerCase().includes(searchLower) || admin.email.toLowerCase().includes(searchLower)\n  })\n\n  return (\n    <div className=\"p-4 md:p-6 max-w-6xl mx-auto\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-foreground\">Configuración</h1>\n        <p className=\"text-sm md:text-base text-muted-foreground mt-2\">Gestiona la configuración del sistema</p>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Tab Navigation */}\n        <div className=\"flex gap-2 border-b\">\n          {canAccessOperatorTab && (\n            <button\n              onClick={() => setActiveTab('operador')}\n              className={cn(\n                'px-4 py-2 text-sm font-medium transition-all border-b-2',\n                activeTab === 'operador'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-muted-foreground hover:text-foreground'\n              )}\n            >\n              Operador\n            </button>\n          )}\n          {user?.role === 'SUPER_ADMIN' && (\n            <button\n              onClick={() => setActiveTab('admins')}\n              className={cn(\n                'px-4 py-2 text-sm font-medium transition-all border-b-2',\n                activeTab === 'admins'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-muted-foreground hover:text-foreground'\n              )}\n            >\n              Admins\n            </button>\n          )}\n        </div>\n\n        {/* Operator Configuration Tab */}\n        {activeTab === 'operador' && (\n          <div className=\"space-y-6\">\n            {/* Recharge Operators Manager */}\n            <div>\n              <RechargeOperatorsManager />\n            </div>\n\n            {/* Operator Amounts Manager */}\n            <div>\n              <OperatorAmountsManager />\n            </div>\n          </div>\n        )}\n\n        {/* Admins Configuration Tab */}\n        {activeTab === 'admins' && (\n          <div className=\"space-y-6\">\n            {/* Header with Create Button */}\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold\">Administradores</h3>\n              <Button\n                onClick={() => setCreateAdminSheetOpen(true)}\n                className=\"bg-[linear-gradient(to_right,#136BBC,#274565)] text-white\"\n              >\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Crear Admin\n              </Button>\n            </div>\n\n            {/* Search Bar */}\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Buscar por nombre o email...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-9 pr-10\"\n                  />\n                  {searchQuery && (\n                    <button\n                      onClick={() => setSearchQuery('')}\n                      className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Admins List */}\n            {isLoadingAdmins ? (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">Cargando admins...</p>\n              </div>\n            ) : admins.length === 0 ? (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <ShieldCheck className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                  <p className=\"text-muted-foreground\">No hay admins registrados</p>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid gap-4 grid-cols-1\">\n                {filteredAdmins.map((admin) => (\n                  <Card key={admin.id}>\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <CardTitle className=\"text-lg\">{admin.fullName}</CardTitle>\n                          <div className=\"flex items-center gap-2 mt-2 min-w-0\">\n                            <Search className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                            <p className=\"text-sm text-muted-foreground truncate\">{admin.email}</p>\n                            <span\n                              title={admin.emailVerified ? 'Email verificado' : 'Email no verificado'}\n                              className=\"flex-shrink-0\"\n                            >\n                              {admin.emailVerified ? (\n                                <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                              ) : (\n                                <AlertCircle className=\"h-4 w-4 text-amber-600\" />\n                              )}\n                            </span>\n                          </div>\n                        </div>\n                        <div className=\"flex flex-col items-end gap-2\">\n                          <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                            Admin\n                          </span>\n                          {!admin.isActive && (\n                            <span className=\"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800\">\n                              Inactivo\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-6 mt-3\">\n                        <div className=\"flex items-center gap-2\">\n                          <Switch\n                            checked={admin.isActive}\n                            onCheckedChange={(checked) => handleToggleAdminActive(admin.id, checked)}\n                          />\n                          <span className=\"text-sm text-muted-foreground\">\n                            {admin.isActive ? 'Activo' : 'Desactivado'}\n                          </span>\n                        </div>\n                      </div>\n                    </CardHeader>\n                  </Card>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Printer Configuration Tab */}\n      </div>\n\n      {/* Create Admin Sheet */}\n      <CreateUserSheet\n        open={createAdminSheetOpen}\n        onOpenChange={setCreateAdminSheetOpen}\n        onUserCreated={handleAdminCreated}\n        role=\"ADMIN\"\n      />\n\n      {/* Printer Detection Dialog */}\n      <PrinterDetectionDialog\n        open={detectionDialogOpen}\n        onOpenChange={setDetectionDialogOpen}\n        onSelectPrinter={handleSelectPrinter}\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\DashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\ExchangeRatePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\ForgotPasswordPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\GirosPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\MinoristaReportsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\MinoristaTransactionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\ReportsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\ResetPasswordPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\SendGiroPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\UsersPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\pages\\VerifyEmailPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\reportWebVitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\types\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\alejo\\Documents\\cambios-los-chamos\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]